# Account ç™»å…¥åŠŸèƒ½æ¸¬è©¦å ±å‘Š

## âœ… æ¸¬è©¦å®Œæˆç‹€æ…‹

æ‰€æœ‰ç™»å…¥åŠŸèƒ½å·²æˆåŠŸå¯¦ä½œä¸¦é€šéæ¸¬è©¦ï¼

## ğŸ—ï¸ åˆ†å±¤æ¶æ§‹å¯¦ä½œ

### 1. UserRepository (`app/Repositories/UserRepository.php`)
- âœ… å°è£ä½¿ç”¨è€…è³‡æ–™åº«æ“ä½œ
- âœ… æä¾› `findByEmail()`, `verifyPassword()` ç­‰æ–¹æ³•
- âœ… ç¶­æŒè³‡æ–™å­˜å–çš„ä¸€è‡´æŠ½è±¡

### 2. UserService (`app/Services/UserService.php`)
- âœ… è™•ç†ç™»å…¥å•†æ¥­é‚è¼¯æµç¨‹
- âœ… æŒç®¡äº¤æ˜“é‚Šç•Œï¼ˆDB Transactionï¼‰
- âœ… æ•´åˆèªè­‰ç³»çµ±èˆ‡éŒ¯èª¤è™•ç†

### 3. UserController (`app/Http/Controllers/UserController.php`)
- âœ… è™•ç† HTTP è«‹æ±‚èˆ‡å›æ‡‰
- âœ… åƒæ•¸é©—è­‰èˆ‡éŒ¯èª¤è™•ç†
- âœ… è¨˜éŒ„æ“ä½œæ—¥èªŒ

### 4. è·¯ç”±é…ç½® (`routes/api.php`)
- âœ… éµå¾ªå‘½åè¦å‰‡ï¼š`{é¡å‹}.{è·¯å¾‘}.{æ¬Šé™}.{æ–¹æ³•}`
- âœ… å…¬é–‹è·¯ç”±ï¼š`api.web.user.auth.login`
- âœ… èªè­‰è·¯ç”±ï¼š`api.web.user.auth.logout`, `api.web.user.profile.me`

## ğŸ§ª æ¸¬è©¦çµæœ

### 1. æˆåŠŸç™»å…¥æ¸¬è©¦
```bash
curl -X POST http://localhost:8000/api/web.user.auth.login \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "password": "password123"}'
```

**å›æ‡‰ï¼š**
```json
{
  "success": true,
  "message": "ç™»å…¥æˆåŠŸ",
  "data": {
    "user": {
      "id": 3,
      "name": "Test User",
      "email": "test@example.com",
      "email_verified_at": "2025-09-06T11:40:44.000000Z"
    },
    "session_id": "VYxSw4g4oRS3DyitCKt4DXUld4Bi5V2F6obNbNuJ"
  }
}
```

### 2. éŒ¯èª¤å¯†ç¢¼æ¸¬è©¦
```bash
curl -X POST http://localhost:8000/api/web.user.auth.login \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "password": "wrongpassword"}'
```

**å›æ‡‰ï¼š**
```json
{
  "success": false,
  "message": "ä½¿ç”¨è€…ä¸å­˜åœ¨æˆ–å¯†ç¢¼éŒ¯èª¤",
  "data": null
}
```

### 3. åƒæ•¸é©—è­‰æ¸¬è©¦
```bash
curl -X POST http://localhost:8000/api/web.user.auth.login \
  -H "Content-Type: application/json" \
  -d '{"email": "invalid-email"}'
```

**å›æ‡‰ï¼š**
```json
{
  "success": false,
  "message": "é©—è­‰å¤±æ•—",
  "errors": {
    "email": ["è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶æ ¼å¼"],
    "password": ["å¯†ç¢¼ç‚ºå¿…å¡«æ¬„ä½"]
  }
}
```

### 4. é›»å­éƒµä»¶æœªé©—è­‰æ¸¬è©¦
**å›æ‡‰ï¼š**
```json
{
  "success": false,
  "message": "è«‹å…ˆé©—è­‰æ‚¨çš„é›»å­éƒµä»¶",
  "data": null
}
```

## ğŸ”§ ç’°å¢ƒé…ç½®

- **PHP ç‰ˆæœ¬ï¼š** 8.4 (Laradocker å®¹å™¨)
- **Laravel ç‰ˆæœ¬ï¼š** 12.x
- **è³‡æ–™åº«ï¼š** MySQL (Laradocker)
- **èªè­‰æ–¹å¼ï¼š** Laravel Session èªè­‰

## ğŸ“‹ åŠŸèƒ½ç‰¹è‰²

### âœ… å·²å¯¦ä½œåŠŸèƒ½
- [x] å®Œæ•´çš„åƒæ•¸é©—è­‰
- [x] éŒ¯èª¤è™•ç†èˆ‡æ—¥èªŒè¨˜éŒ„
- [x] çµ±ä¸€çš„å›æ‡‰æ ¼å¼
- [x] äº¤æ˜“é‚Šç•Œç®¡ç†
- [x] å¯†ç¢¼é©—è­‰
- [x] é›»å­éƒµä»¶é©—è­‰æª¢æŸ¥
- [x] Session åŸºç¤èªè­‰
- [x] åˆ†å±¤æ¶æ§‹éµå¾ª

### ğŸ”„ å¯æ“´å±•åŠŸèƒ½
- [ ] JWT Token èªè­‰
- [ ] è¨˜ä½æˆ‘åŠŸèƒ½
- [ ] ç™»å…¥å˜—è©¦æ¬¡æ•¸é™åˆ¶
- [ ] é›™å› ç´ èªè­‰
- [ ] ç¤¾äº¤ç™»å…¥æ•´åˆ

## ğŸš€ éƒ¨ç½²èªªæ˜

### 1. ç’°å¢ƒè¦æ±‚
- PHP 8.2+
- Laravel 12.x
- MySQL 5.7+
- Composer

### 2. å®‰è£æ­¥é©Ÿ
```bash
# 1. å®‰è£ä¾è³´
composer install

# 2. ç’°å¢ƒé…ç½®
cp .env.example .env
php artisan key:generate

# 3. è³‡æ–™åº«é·ç§»
php artisan migrate

# 4. å»ºç«‹æ¸¬è©¦ä½¿ç”¨è€…
php artisan db:seed --class=TestUserSeeder

# 5. å•Ÿå‹•æœå‹™
php artisan serve
```

### 3. API ç«¯é»
- **ç™»å…¥ï¼š** `POST /api/web.user.auth.login`
- **ç™»å‡ºï¼š** `POST /api/web.user.auth.logout`
- **ä½¿ç”¨è€…è³‡è¨Šï¼š** `GET /api/web.user.profile.me`

## ğŸ“ é–‹ç™¼è¦ç¯„éµå¾ª

âœ… **åš´æ ¼éµå¾ªåˆ†å±¤æ¶æ§‹ï¼š**
- Controller åªè² è²¬ HTTP è™•ç†
- Service è™•ç†å•†æ¥­é‚è¼¯
- Repository å°è£è³‡æ–™åº«æ“ä½œ
- åš´ç¦åœ¨ Controller/Service ç›´æ¥æŸ¥è©¢è³‡æ–™åº«

âœ… **è·¯ç”±å‘½åè¦å‰‡ï¼š**
- æ ¼å¼ï¼š`{é¡å‹}.{è·¯å¾‘}.{æ¬Šé™}.{æ–¹æ³•}`
- ç¯„ä¾‹ï¼š`api.web.user.auth.login`

âœ… **éŒ¯èª¤è™•ç†ï¼š**
- çµ±ä¸€çš„ JSON å›æ‡‰æ ¼å¼
- è©³ç´°çš„éŒ¯èª¤è¨Šæ¯
- å®Œæ•´çš„æ—¥èªŒè¨˜éŒ„

## ğŸ‰ çµè«–

User ç™»å…¥åŠŸèƒ½å·²å®Œå…¨æŒ‰ç…§æ‚¨çš„åˆ†å±¤æ¶æ§‹è¦æ±‚å¯¦ä½œå®Œæˆï¼Œæ‰€æœ‰æ¸¬è©¦éƒ½é€šéï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼
