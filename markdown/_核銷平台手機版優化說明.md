# 核銷平台手機版優化說明

## ✅ 已完成的優化

### 1. 登入頁面優化（VerifierLogin.vue）

#### 響應式設計
- ✅ 標題大小調整（手機：text-2xl，桌面：text-4xl）
- ✅ 圖示大小調整（手機：w-16 h-16，桌面：w-20 h-20）
- ✅ 間距優化（手機：py-4，桌面：py-8）
- ✅ 卡片內距調整（手機：p-6，桌面：p-8）

#### 觸控優化
- ✅ 輸入框高度增加（py-3.5）方便觸控
- ✅ 按鈕高度增加（py-4）符合觸控標準（至少 44px）
- ✅ 加入 `touch-manipulation` CSS 類別，減少觸控延遲
- ✅ 加入 `active:scale-95` 提供觸控回饋

#### 手機輸入優化
- ✅ 加入 `inputmode="text"` 提示鍵盤類型
- ✅ 加入 `autocomplete` 屬性改善輸入體驗
- ✅ 輸入框字體大小調整（手機：text-base，桌面：text-sm）避免自動縮放

### 2. 核銷作業頁面（VerifierDashboard.vue）

#### 功能特色
- ✅ 響應式設計，完全適配手機
- ✅ 大按鈕設計，方便觸控操作
- ✅ 網路狀態提示（固定在頂部）
- ✅ 離線記錄管理（顯示待同步數量）
- ✅ 統計資訊卡片（2x2 網格，手機友好）
- ✅ 最近核銷記錄列表（可滾動）

#### 觸控優化
- ✅ 所有按鈕至少 44px 高度
- ✅ 輸入框高度 48px+（py-3.5）
- ✅ 加入觸控回饋動畫
- ✅ 底部 Modal 設計（手機從底部滑出）

#### 手機版特殊處理
- ✅ 輸入框字體大小 16px（避免 iOS 自動縮放）
- ✅ 固定頂部導航（sticky top-0）
- ✅ 底部安全區域處理（pb-20）

### 3. PWA 配置優化

#### Manifest 設定
- ✅ `display: 'standalone'` - 全螢幕體驗
- ✅ `orientation: 'portrait'` - 強制直向（適合核銷作業）
- ✅ `start_url: '/verifier/login'` - 直接進入核銷平台
- ✅ `short_name: '核銷平台'` - 簡短名稱適合手機

---

## 📱 手機版最佳實踐

### 1. 觸控目標大小
- ✅ 所有可點擊元素至少 44x44px
- ✅ 按鈕間距至少 8px
- ✅ 輸入框高度至少 48px

### 2. 字體大小
- ✅ 手機版輸入框使用 `text-base`（16px）避免自動縮放
- ✅ 標題使用響應式大小（sm:text-xl）
- ✅ 確保文字可讀性（最小 14px）

### 3. 間距優化
- ✅ 手機版減少垂直間距（py-4 vs py-8）
- ✅ 卡片內距調整（p-6 vs p-8）
- ✅ 元素間距使用響應式（gap-3 sm:gap-4）

### 4. 導航優化
- ✅ 固定頂部導航（sticky）
- ✅ 底部 Modal 設計（手機友好）
- ✅ 大圖示按鈕（易於觸控）

---

## 🔧 待實作功能

### 1. 條碼掃描功能
- [ ] 整合條碼掃描器（如 QuaggaJS、ZXing）
- [ ] 相機權限請求
- [ ] 掃描結果處理

### 2. 核銷 API 整合
- [x] 實作 `POST /api/verifier-platform/verify` API
- [x] 實作批量同步 API (`POST /api/verifier-platform/verify/batch`)
- [x] 錯誤處理和重試機制
- [x] 權限檢查（company_id 驗證）
- [x] 狀態檢查（只有已列印狀態可核銷）
- [x] 統計 API (`GET /api/verifier-platform/verify/stats`)

### 3. 認證路由守衛
- [x] 實作核銷平台路由守衛
- [x] 檢查 `verifier_token` 和 `verifier_user`
- [x] 未登入時重導向到登入頁
- [x] 已登入時訪問登入頁自動重導向到 Dashboard

### 4. 資料同步機制
- [ ] 實作自動同步（網路恢復時）
- [ ] 實作手動同步按鈕
- [ ] 同步狀態顯示

---

## 📋 測試檢查清單

### 手機版測試
- [ ] 登入頁面在不同手機尺寸正常顯示
- [ ] 輸入框不會自動縮放（iOS Safari）
- [ ] 按鈕大小符合觸控標準
- [ ] 文字大小可讀
- [ ] 間距適當，不會太擠

### 觸控測試
- [ ] 所有按鈕容易點擊
- [ ] 輸入框容易聚焦
- [ ] 觸控回饋明顯
- [ ] 沒有意外觸發

### PWA 測試
- [ ] 可以安裝到主畫面
- [ ] 安裝後圖示正常顯示
- [ ] 啟動後進入正確頁面
- [ ] 離線功能正常運作

### 功能測試
- [x] 登入功能正常
- [x] 核銷功能正常（在線/離線）
- [x] 離線記錄儲存正常
- [x] 同步功能正常
- [x] 權限檢查正常（company_id 驗證）
- [x] 狀態檢查正常（只有已列印可核銷）

---

## 🎨 設計原則

### 1. 手機優先（Mobile First）
- 先設計手機版，再擴展到桌面版
- 使用 Tailwind 的響應式前綴（sm:, md:, lg:）

### 2. 觸控友好
- 大按鈕、大輸入框
- 充足的間距
- 明顯的視覺回饋

### 3. 簡潔明瞭
- 減少不必要的元素
- 重要功能突出顯示
- 清晰的視覺層次

### 4. 效能優化
- 快速載入
- 流暢動畫
- 離線可用

---

## 📝 注意事項

### 1. iOS Safari 特殊處理
- 輸入框字體大小必須 ≥ 16px 才不會自動縮放
- 使用 `viewport-fit=cover` 處理安全區域
- 測試不同 iOS 版本

### 2. Android Chrome
- 測試不同 Android 版本
- 注意虛擬鍵盤遮擋問題
- 測試不同螢幕尺寸

### 3. PWA 安裝
- 需要 HTTPS（生產環境）
- 提供安裝提示
- 測試不同瀏覽器

---

## 🔗 相關檔案

### 前端檔案
- `resources/js/pages/VerifierLogin.vue` - 登入頁面
- `resources/js/pages/VerifierDashboard.vue` - 核銷作業頁面
- `resources/js/composables/useNetworkStatus.js` - 網路狀態檢測
- `resources/js/utils/offlineStorageSimple.js` - 離線儲存工具

### 配置檔案
- `vite.config.js` - PWA 配置
- `resources/js/router/index.js` - 路由配置

