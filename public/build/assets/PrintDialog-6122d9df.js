import{_ as h,H as x,r as k,z as y,h as r,c as u,d as t,f as n,t as d,p as V,v as j,j as g}from"./app-86615f25.js";const B={key:0,class:"fixed inset-0 bg-gray-600/50 h-full w-full z-50 flex items-center justify-center p-4"},C={class:"relative mx-auto px-6 py-5 border w-full max-w-md shadow-lg rounded-xl bg-white"},D={class:"space-y-4"},P={key:0,class:"text-gray-500 flex items-center gap-2"},z={key:1,class:"text-sm text-gray-700 space-y-1"},M={class:"font-semibold"},T={class:"font-semibold"},E={class:"font-semibold"},F={class:"font-semibold"},H=["max"],I={key:0,class:"text-red-600 text-xs mt-1"},O={class:"mt-5 flex justify-end gap-3"},S=["disabled"],U={__name:"PrintDialog",props:{modelValue:{type:Boolean,default:!1},totals:{type:Object,default:()=>({total:0,total_meters:0,verified:0,pending:0})},loading:{type:Boolean,default:!1},count:{type:Number,default:1}},emits:["update:modelValue","update:count","submit"],setup(o,{emit:_}){const i=o,m=_,a=x(()=>{var s,e;return Math.max(0,Number(((s=i.totals)==null?void 0:s.total)??0)-Number(((e=i.totals)==null?void 0:e.verified)??0))}),l=k(i.count||1);y(()=>i.count,s=>{l.value=s||1}),y(l,s=>m("update:count",Number(s)||1));const c=x(()=>{const s=Number(l.value);return!Number.isFinite(s)||s<=0||s>a.value}),b=()=>m("update:modelValue",!1),w=()=>{c.value||m("submit")};return(s,e)=>{var f,p,v;return o.modelValue?(r(),u("div",B,[t("div",C,[t("div",{class:"flex items-center justify-between mb-3"},[e[2]||(e[2]=t("h3",{class:"text-lg font-medium text-gray-900"},"列印未列印憑證",-1)),t("button",{onClick:b,class:"text-gray-400 hover:text-gray-600"},[...e[1]||(e[1]=[t("i",{class:"fas fa-times"},null,-1)])])]),t("div",D,[o.loading?(r(),u("div",P,[...e[3]||(e[3]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),n(" 讀取統計中... ",-1)])])):(r(),u("div",z,[t("div",null,[e[4]||(e[4]=n("總張數：",-1)),t("span",M,d(((f=o.totals)==null?void 0:f.total)??0)+" 張",1)]),t("div",null,[e[5]||(e[5]=n("總米數：",-1)),t("span",T,d(((p=o.totals)==null?void 0:p.total_meters)??0)+" 米",1)]),t("div",null,[e[6]||(e[6]=n("已印數量：",-1)),t("span",E,d(((v=o.totals)==null?void 0:v.verified)??0),1)]),t("div",null,[e[7]||(e[7]=n("未印數量：",-1)),t("span",F,d(a.value),1)])])),t("div",null,[e[8]||(e[8]=t("label",{class:"label-base"},"本次列印數量",-1)),V(t("input",{type:"number",max:a.value,min:"1","onUpdate:modelValue":e[0]||(e[0]=N=>l.value=N),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,8,H),[[j,l.value,void 0,{number:!0}]]),Number(l.value)>a.value?(r(),u("p",I,"不可超過未印數量（"+d(a.value)+"）",1)):g("",!0)])]),t("div",O,[t("button",{onClick:b,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"取消"),t("button",{onClick:w,disabled:c.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed"}," 確認列印 ",8,S)])])])):g("",!0)}}},A=h(U,[["__scopeId","data-v-6b566190"]]);export{A as P};
