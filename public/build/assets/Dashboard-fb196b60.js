import{a as $,u as E,b as F,r as B,o as I,c as o,d as t,t as a,e as C,f as h,F as L,g as V,h as d,n as P,i as q}from"./app-86615f25.js";import{f as G}from"./date-69680232.js";const J={async getStats(){return await $.get("/dashboard/stats")}},K={class:"container mx-auto px-4 py-8"},O={class:"max-w-7xl mx-auto"},Q={class:"mb-8 flex items-center justify-between"},R={class:"text-gray-600"},U={key:0,class:"flex justify-center items-center py-20"},W={key:1},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Y={class:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg"},Z={class:"flex items-center justify-between mb-4"},tt={class:"text-right"},et={class:"text-3xl font-bold"},st={class:"text-sm opacity-90"},at={class:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg"},lt={class:"flex items-center justify-between mb-4"},ot={class:"text-right"},dt={class:"text-3xl font-bold"},it={class:"text-sm opacity-90"},rt={class:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-6 rounded-xl shadow-lg"},nt={class:"flex items-center justify-between mb-4"},ct={class:"text-right"},ut={class:"text-3xl font-bold"},ht={class:"text-sm opacity-90"},vt={class:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg"},mt={class:"flex items-center justify-between mb-4"},xt={class:"text-right"},_t={class:"text-3xl font-bold"},gt={class:"text-sm opacity-90"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},bt={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-200"},pt={class:"space-y-3"},yt={class:"flex justify-between items-center"},wt={class:"font-semibold text-gray-800"},zt={class:"flex justify-between items-center"},jt={class:"font-semibold text-yellow-600"},Mt={class:"flex justify-between items-center"},Ht={class:"font-semibold text-blue-600"},kt={class:"flex justify-between items-center"},Bt={class:"font-semibold text-green-600"},Ct={class:"flex justify-between items-center"},Lt={class:"font-semibold text-red-600"},Vt={class:"flex justify-between items-center"},Dt={class:"font-semibold text-gray-600"},St={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-200"},Tt={class:"space-y-2 max-h-64 overflow-y-auto"},Nt={class:"text-sm text-gray-600"},At={class:"flex items-center"},$t={class:"w-24 bg-gray-200 rounded-full h-2 mr-2"},Et={class:"text-sm font-semibold text-gray-800 w-8 text-right"},Ft={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-200"},It={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pt={class:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},qt={key:0,"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"},Gt={key:1,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},Jt={key:2,"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},Kt={class:"flex-1 min-w-0"},Ot={class:"text-sm font-medium text-gray-900"},Qt={class:"text-sm text-gray-500 truncate"},Rt={class:"text-xs text-gray-400 mt-1"},Ut={key:1,class:"text-center py-8 text-gray-500"},Zt={__name:"Dashboard",setup(Wt){const{user:D}=E(),{error:v}=F(),c=B(!0),s=B({earth_data:{total:0,active:0,inactive:0},earth_data_detail:{total:0,unprinted:0,printed:0,used:0,voided:0,recycled:0,today_used:0},basic:{customers:0,cleaners:0,verifiers:0},recent_activities:[],monthly_trend:[]}),S=async()=>{c.value=!0;try{const l=await J.getStats();l.status&&l.data?s.value=l.data:v("載入統計資料失敗")}catch(l){console.error("載入統計資料失敗:",l),v("載入統計資料失敗")}finally{c.value=!1}},T=l=>{if(!l)return"";const e=new Date(l);if(isNaN(e.getTime()))return"";const r=e.getMonth()+1,n=e.getDate();return`${r}/${n}`},N=l=>({earth_data:"bg-blue-500",verify:"bg-green-500",announcement:"bg-amber-500"})[l]||"bg-gray-500",A=l=>{if(!s.value.monthly_trend||s.value.monthly_trend.length===0)return 0;const e=Math.max(...s.value.monthly_trend.map(r=>r.count));return e===0?0:Math.round(l/e*100)};return I(()=>{S()}),(l,e)=>{var r,n,m,x,_,g,f,b,p,y,w,z,j,M,H,k;return d(),o("div",K,[t("div",O,[t("div",Q,[e[0]||(e[0]=t("h1",{class:"text-3xl font-bold text-gray-800"},"儀表板",-1)),t("p",R,"歡迎回來，"+a(((r=C(D))==null?void 0:r.name)||"使用者"),1)]),c.value?(d(),o("div",U,[...e[1]||(e[1]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"},null,-1)])])):(d(),o("div",W,[t("div",X,[t("div",Y,[t("div",Z,[e[3]||(e[3]=t("div",{class:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])],-1)),t("div",tt,[t("div",et,a(((n=s.value.earth_data)==null?void 0:n.total)||0),1),e[2]||(e[2]=t("div",{class:"text-sm opacity-90"},"土單總數",-1))])]),e[4]||(e[4]=t("h3",{class:"text-lg font-semibold mb-1"},"土單資料",-1)),t("p",st,"進行中："+a(((m=s.value.earth_data)==null?void 0:m.active)||0),1)]),t("div",at,[t("div",lt,[e[6]||(e[6]=t("div",{class:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),t("div",ot,[t("div",dt,a(((x=s.value.earth_data_detail)==null?void 0:x.used)||0),1),e[5]||(e[5]=t("div",{class:"text-sm opacity-90"},"已核銷",-1))])]),e[7]||(e[7]=t("h3",{class:"text-lg font-semibold mb-1"},"核銷統計",-1)),t("p",it,"今日："+a(((_=s.value.earth_data_detail)==null?void 0:_.today_used)||0),1)]),t("div",rt,[t("div",nt,[e[9]||(e[9]=t("div",{class:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])],-1)),t("div",ct,[t("div",ut,a(((g=s.value.earth_data_detail)==null?void 0:g.unprinted)||0),1),e[8]||(e[8]=t("div",{class:"text-sm opacity-90"},"待列印",-1))])]),e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-1"},"待處理",-1)),t("p",ht,"已列印："+a(((f=s.value.earth_data_detail)==null?void 0:f.printed)||0),1)]),t("div",vt,[t("div",mt,[e[12]||(e[12]=t("div",{class:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})])],-1)),t("div",xt,[t("div",_t,a(((b=s.value.basic)==null?void 0:b.customers)||0),1),e[11]||(e[11]=t("div",{class:"text-sm opacity-90"},"客戶數",-1))])]),e[13]||(e[13]=t("h3",{class:"text-lg font-semibold mb-1"},"基礎資料",-1)),t("p",gt,"清運業者："+a(((p=s.value.basic)==null?void 0:p.cleaners)||0)+" | 核銷人員："+a(((y=s.value.basic)==null?void 0:y.verifiers)||0),1)])]),t("div",ft,[t("div",bt,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("svg",{class:"w-5 h-5 mr-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})]),h(" 土單明細狀態 ")],-1)),t("div",pt,[t("div",yt,[e[14]||(e[14]=t("span",{class:"text-gray-600"},"總數",-1)),t("span",wt,a(((w=s.value.earth_data_detail)==null?void 0:w.total)||0),1)]),t("div",zt,[e[15]||(e[15]=t("span",{class:"text-gray-600"},"未列印",-1)),t("span",jt,a(((z=s.value.earth_data_detail)==null?void 0:z.unprinted)||0),1)]),t("div",Mt,[e[16]||(e[16]=t("span",{class:"text-gray-600"},"已列印",-1)),t("span",Ht,a(((j=s.value.earth_data_detail)==null?void 0:j.printed)||0),1)]),t("div",kt,[e[17]||(e[17]=t("span",{class:"text-gray-600"},"已核銷",-1)),t("span",Bt,a(((M=s.value.earth_data_detail)==null?void 0:M.used)||0),1)]),t("div",Ct,[e[18]||(e[18]=t("span",{class:"text-gray-600"},"作廢",-1)),t("span",Lt,a(((H=s.value.earth_data_detail)==null?void 0:H.voided)||0),1)]),t("div",Vt,[e[19]||(e[19]=t("span",{class:"text-gray-600"},"回收",-1)),t("span",Dt,a(((k=s.value.earth_data_detail)==null?void 0:k.recycled)||0),1)])])]),t("div",St,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),h(" 本月核銷趨勢 ")],-1)),t("div",Tt,[(d(!0),o(L,null,V(s.value.monthly_trend,(i,u)=>(d(),o("div",{key:u,class:"flex justify-between items-center py-1"},[t("span",Nt,a(T(i.date)),1),t("div",At,[t("div",$t,[t("div",{class:"bg-green-500 h-2 rounded-full",style:P({width:`${A(i.count)}%`})},null,4)]),t("span",Et,a(i.count),1)])]))),128))])])]),t("div",Ft,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("svg",{class:"w-5 h-5 mr-2 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})]),h(" 最近活動 ")],-1)),s.value.recent_activities&&s.value.recent_activities.length>0?(d(),o("div",It,[(d(!0),o(L,null,V(s.value.recent_activities,(i,u)=>(d(),o("div",{key:u,class:"flex items-start p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200"},[t("div",{class:q(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center mr-3",N(i.type)])},[(d(),o("svg",Pt,[i.type==="earth_data"?(d(),o("path",qt)):i.type==="verify"?(d(),o("path",Gt)):(d(),o("path",Jt))]))],2),t("div",Kt,[t("p",Ot,a(i.title),1),t("p",Qt,a(i.subtitle),1),t("p",Rt,a(C(G)(i.created_at)),1)])]))),128))])):(d(),o("div",Ut," 暫無最近活動 "))])]))])])}}};export{Zt as default};
