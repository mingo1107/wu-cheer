import{o as A,c as q,a as l,f as I,B as At,m as gt,A as G,F as he,l as Me,C as be,D as Qt,t as N,E as Ba,T as Da,G as xe,H as ct,i as V,x as ee,y as ye,I as it,j as xt,J as qa,K as tt,L as ja,h as Ia,s as Bt,b as Dt,w as Ma,g as me,k as oe,v as ve,z as qt,e as Ra,M as Zt,r as Va}from"./app-6758fae4.js";import{P as $a}from"./PrintDialog-675760f2.js";import{c as ea,e as Ge}from"./common-189d96d1.js";function Ee(e){return e==null}function Na(e,a,t){const{object:o,valueProp:s,mode:f}=xe(e),n=ct().proxy,d=t.iv,v=(O,S=!0)=>{d.value=u(O);const x=b(O);a.emit("change",x,n),S&&(a.emit("input",x),a.emit("update:modelValue",x))},b=O=>o.value||Ee(O)?O:Array.isArray(O)?O.map(S=>S[s.value]):O[s.value],u=O=>Ee(O)?f.value==="single"?{}:[]:O;return{update:v}}function se(e){return ja(()=>({get:e,set:()=>{}}))}function Wa(e,a){const{value:t,modelValue:o,mode:s,valueProp:f}=xe(e),n=V(s.value!=="single"?[]:{}),d=se(()=>o.value!==void 0?o.value:t.value),v=ee(()=>s.value==="single"?n.value[f.value]:n.value.map(u=>u[f.value])),b=se(()=>s.value!=="single"?n.value.map(u=>u[f.value]).join(","):n.value[f.value]);return{iv:n,internalValue:n,ev:d,externalValue:d,textValue:b,plainValue:v}}function Fa(e,a,t){const{regex:o}=xe(e),s=ct().proxy,f=t.isOpen,n=t.open,d=V(null),v=()=>{d.value=""},b=S=>{d.value=S.target.value},u=S=>{if(o.value){let x=o.value;typeof x=="string"&&(x=new RegExp(x)),S.key.match(x)||S.preventDefault()}},O=S=>{if(o.value){let T=(S.clipboardData||window.clipboardData).getData("Text"),L=o.value;typeof L=="string"&&(L=new RegExp(L)),T.split("").every(P=>!!P.match(L))||S.preventDefault()}a.emit("paste",S,s)};return ye(d,S=>{!f.value&&S&&n(),a.emit("search-change",S,s)}),{search:d,clearSearch:v,handleSearchInput:b,handleKeypress:u,handlePaste:O}}function Ua(e,a,t){const{groupSelect:o,mode:s,groups:f,disabledProp:n}=xe(e),d=V(null),v=u=>{u===void 0||u!==null&&u[n.value]||f.value&&u&&u.group&&(s.value==="single"||!o.value)||(d.value=u)};return{pointer:d,setPointer:v,clearPointer:()=>{v(null)}}}function jt(e,a=!0){return a?String(e).toLowerCase().trim():String(e).toLowerCase().normalize("NFD").trim().replace(/æ/g,"ae").replace(/œ/g,"oe").replace(/ø/g,"o").replace(/\p{Diacritic}/gu,"")}function Ha(e){return Object.prototype.toString.call(e)==="[object Object]"}function za(e,a){if(e.length!==a.length)return!1;const t=a.slice().sort();return e.slice().sort().every(function(o,s){return o===t[s]})}const ia=(e,a)=>{if(e===a)return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;const t=Object.keys(e),o=Object.keys(a);if(t.length!==o.length)return!1;for(let s of t)if(!o.includes(s)||!ia(e[s],a[s]))return!1;return!0};function Ga(e,a,t){const{options:o,mode:s,trackBy:f,limit:n,hideSelected:d,createTag:v,createOption:b,label:u,appendNewTag:O,appendNewOption:S,multipleLabel:x,object:T,loading:L,delay:P,resolveOnLoad:_,minChars:C,filterResults:c,clearOnSearch:k,clearOnSelect:E,valueProp:y,allowAbsent:B,groupLabel:W,canDeselect:F,max:U,strict:K,closeOnSelect:D,closeOnDeselect:Q,groups:Z,reverse:ie,infinite:w,groupOptions:R,groupHideEmpty:Oe,groupSelect:X,onCreate:te,disabledProp:Y,searchStart:ue,searchFilter:ae}=xe(e),J=ct().proxy,$=t.iv,h=t.ev,j=t.search,le=t.clearSearch,de=t.update,Fe=t.pointer,De=t.setPointer,Le=t.clearPointer,Ye=t.focus,nt=t.deactivate,Ce=t.close,Ue=t.localize,Te=V([]),ge=V([]),ce=V(!1),m=V(null),r=V(w.value&&n.value===-1?10:n.value),M=ee({get:()=>ge.value,set:i=>ge.value=i}),H=se(()=>v.value||b.value||!1),pe=se(()=>O.value!==void 0?O.value:S.value!==void 0?S.value:!0),re=ee(()=>{if(Z.value){let i=Pe.value||[],g=[];return i.forEach(z=>{Pt(z[R.value]).forEach(ne=>{g.push(Object.assign({},ne,z[Y.value]?{[Y.value]:!0}:{}))})}),g}else{let i=Pt(ge.value||[]);return Te.value.length&&(i=i.concat(Te.value)),i}}),fe=ee(()=>{let i=re.value;return ie.value&&(i=i.reverse()),Qe.value.length&&(i=Qe.value.concat(i)),Tt(i)}),_e=ee(()=>{let i=fe.value;return r.value>0&&(i=i.slice(0,r.value)),i}),Pe=ee(()=>{if(!Z.value)return[];let i=[],g=ge.value||[];return Te.value.length&&i.push({[W.value]:" ",[R.value]:[...Te.value],__CREATE__:!0}),i.concat(g)}),ft=ee(()=>{let i=[...Pe.value].map(g=>({...g}));return Qe.value.length&&(i[0]&&i[0].__CREATE__?i[0][R.value]=[...Qe.value,...i[0][R.value]]:i=[{[W.value]:" ",[R.value]:[...Qe.value],__CREATE__:!0}].concat(i)),i}),Je=ee(()=>{if(!Z.value)return[];let i=ft.value;return Pa((i||[]).map((g,z)=>{const ne=Pt(g[R.value]);return{...g,index:z,group:!0,[R.value]:Tt(ne,!1).map(ze=>Object.assign({},ze,g[Y.value]?{[Y.value]:!0}:{})),__VISIBLE__:Tt(ne).map(ze=>Object.assign({},ze,g[Y.value]?{[Y.value]:!0}:{}))}}))}),p=ee(()=>{switch(s.value){case"single":return!Ee($.value[y.value]);case"multiple":case"tags":return!Ee($.value)&&$.value.length>0}}),qe=ee(()=>x.value!==void 0?x.value($.value,J):$.value&&$.value.length>1?`${$.value.length} options selected`:"1 option selected"),ma=se(()=>!re.value.length&&!ce.value&&!Qe.value.length),ga=se(()=>re.value.length>0&&_e.value.length==0&&(j.value&&Z.value||!Z.value)),Qe=ee(()=>H.value===!1||!j.value?[]:La(j.value)!==-1?[]:[{[y.value]:j.value,[He.value[0]]:j.value,[u.value]:j.value,__CREATE__:!0}]),He=ee(()=>f.value?Array.isArray(f.value)?f.value:[f.value]:[u.value]),ha=se(()=>{switch(s.value){case"single":return null;case"multiple":case"tags":return[]}}),ya=se(()=>L.value||ce.value),Ze=i=>{switch(typeof i!="object"&&(i=Ie(i)),s.value){case"single":de(i);break;case"multiple":case"tags":de($.value.concat(i));break}a.emit("select",Ht(i),i,J)},et=i=>{switch(typeof i!="object"&&(i=Ie(i)),s.value){case"single":Gt();break;case"tags":case"multiple":de(Array.isArray(i)?$.value.filter(g=>i.map(z=>z[y.value]).indexOf(g[y.value])===-1):$.value.filter(g=>g[y.value]!=i[y.value]));break}a.emit("deselect",Ht(i),i,J)},Ht=i=>T.value?i:i[y.value],zt=i=>{et(i)},wa=(i,g)=>{if(g.button!==0){g.preventDefault();return}zt(i)},Gt=()=>{de(ha.value),a.emit("clear",J)},je=i=>{if(i.group!==void 0)return s.value==="single"?!1:Sa(i[R.value])&&i[R.value].length;switch(s.value){case"single":return!Ee($.value)&&($.value[y.value]==i[y.value]||typeof $.value[y.value]=="object"&&typeof i[y.value]=="object"&&ia($.value[y.value],i[y.value]));case"tags":case"multiple":return!Ee($.value)&&$.value.map(g=>g[y.value]).indexOf(i[y.value])!==-1}},St=i=>i[Y.value]===!0,Lt=()=>U===void 0||U.value===-1||!p.value&&U.value>0?!1:$.value.length>=U.value,xa=i=>{if(!St(i)){if(te.value&&!je(i)&&i.__CREATE__&&(i={...i},delete i.__CREATE__,i=te.value(i,J),i instanceof Promise)){ce.value=!0,i.then(g=>{ce.value=!1,Kt(g)});return}Kt(i)}},Kt=i=>{switch(i.__CREATE__&&(i={...i},delete i.__CREATE__),s.value){case"single":if(i&&je(i)){F.value&&et(i),Q.value&&(Le(),Ce());return}i&&Ct(i),E.value&&le(),D.value&&(Le(),Ce()),i&&Ze(i);break;case"multiple":if(i&&je(i)){et(i),Q.value&&(Le(),Ce());return}if(Lt()){a.emit("max",J);return}i&&(Ct(i),Ze(i)),E.value&&le(),d.value&&Le(),D.value&&Ce();break;case"tags":if(i&&je(i)){et(i),Q.value&&(Le(),Ce());return}if(Lt()){a.emit("max",J);return}i&&Ct(i),E.value&&le(),i&&Ze(i),d.value&&Le(),D.value&&Ce();break}D.value||Ye()},Oa=i=>{if(!(St(i)||s.value==="single"||!X.value)){switch(s.value){case"multiple":case"tags":_a(i[R.value])?et(i[R.value]):Ze(i[R.value].filter(g=>$.value.map(z=>z[y.value]).indexOf(g[y.value])===-1).filter(g=>!g[Y.value]).filter((g,z)=>$.value.length+1+z<=U.value||U.value===-1)),d.value&&Fe.value&&De(Je.value.filter(g=>!g[Y.value])[Fe.value.index]);break}D.value&&nt()}},Ct=i=>{Ie(i[y.value])===void 0&&H.value&&(a.emit("tag",i[y.value],J),a.emit("option",i[y.value],J),a.emit("create",i[y.value],J),pe.value&&Ta(i),le())},ka=()=>{s.value!=="single"&&Ze(_e.value.filter(i=>!i.disabled&&!je(i)))},_a=i=>i.find(g=>!je(g)&&!g[Y.value])===void 0,Sa=i=>i.find(g=>!je(g))===void 0,Ie=i=>re.value[re.value.map(g=>String(g[y.value])).indexOf(String(i))],La=i=>re.value.findIndex(g=>He.value.some(z=>(parseInt(g[z])==g[z]?parseInt(g[z]):g[z])===(parseInt(i)==i?parseInt(i):i))),Ca=i=>["tags","multiple"].indexOf(s.value)!==-1&&d.value&&je(i),Ta=i=>{Te.value.push(i)},Pa=i=>Oe.value?i.filter(g=>j.value?g.__VISIBLE__.length:g[R.value].length):i.filter(g=>j.value?g.__VISIBLE__.length:!0),Tt=(i,g=!0)=>{let z=i;if(j.value&&c.value){let ne=ae.value;ne||(ne=(ze,Yt,Ln)=>He.value.some(Aa=>{let Jt=jt(Ue(ze[Aa]),K.value);return ue.value?Jt.startsWith(jt(Yt,K.value)):Jt.indexOf(jt(Yt,K.value))!==-1})),z=z.filter(ze=>ne(ze,j.value,J))}return d.value&&g&&(z=z.filter(ne=>!Ca(ne))),z},Pt=i=>{let g=i;return Ha(g)&&(g=Object.keys(g).map(z=>{let ne=g[z];return{[y.value]:z,[He.value[0]]:ne,[u.value]:ne}})),g&&Array.isArray(g)?g=g.map(z=>typeof z=="object"?z:{[y.value]:z,[He.value[0]]:z,[u.value]:z}):g=[],g},vt=()=>{Ee(h.value)||($.value=bt(h.value))},pt=i=>(ce.value=!0,new Promise((g,z)=>{o.value(j.value,J).then(ne=>{ge.value=ne||[],typeof i=="function"&&i(ne),ce.value=!1}).catch(ne=>{console.error(ne),ge.value=[],ce.value=!1}).finally(()=>{g()})})),Et=()=>{if(p.value)if(s.value==="single"){let i=Ie($.value[y.value]);if(i!==void 0){let g=i[u.value];$.value[u.value]=g,T.value&&(h.value[u.value]=g)}}else $.value.forEach((i,g)=>{let z=Ie($.value[g][y.value]);if(z!==void 0){let ne=z[u.value];$.value[g][u.value]=ne,T.value&&(h.value[g][u.value]=ne)}})},Ea=i=>{pt(i)},bt=i=>Ee(i)?s.value==="single"?{}:[]:T.value?i:s.value==="single"?Ie(i)||(B.value?{[u.value]:i,[y.value]:i,[He.value[0]]:i}:{}):i.filter(g=>!!Ie(g)||B.value).map(g=>Ie(g)||{[u.value]:g,[y.value]:g,[He.value[0]]:g}),Xt=()=>{m.value=ye(j,i=>{i.length<C.value||!i&&C.value!==0||(ce.value=!0,k.value&&(ge.value=[]),setTimeout(()=>{i==j.value&&o.value(j.value,J).then(g=>{(i==j.value||!j.value)&&(ge.value=g,Fe.value=_e.value.filter(z=>z[Y.value]!==!0)[0]||null,ce.value=!1)}).catch(g=>{console.error(g)})},P.value))},{flush:"sync"})};if(s.value!=="single"&&!Ee(h.value)&&!Array.isArray(h.value))throw new Error(`v-model must be an array when using "${s.value}" mode`);return o&&typeof o.value=="function"?_.value?pt(vt):T.value==!0&&vt():(ge.value=o.value,vt()),P.value>-1&&Xt(),ye(P,(i,g)=>{m.value&&m.value(),i>=0&&Xt()}),ye(h,i=>{if(Ee(i)){de(bt(i),!1);return}switch(s.value){case"single":(T.value?i[y.value]!=$.value[y.value]:i!=$.value[y.value])&&de(bt(i),!1);break;case"multiple":case"tags":za(T.value?i.map(g=>g[y.value]):i,$.value.map(g=>g[y.value]))||de(bt(i),!1);break}},{deep:!0}),ye(o,(i,g)=>{typeof e.options=="function"?_.value&&(!g||i&&i.toString()!==g.toString())&&pt():(ge.value=e.options,Object.keys($.value).length||vt(),Et())}),ye(u,Et),ye(n,(i,g)=>{r.value=w.value&&i===-1?10:i}),{resolvedOptions:M,pfo:fe,fo:_e,filteredOptions:_e,hasSelected:p,multipleLabelText:qe,eo:re,extendedOptions:re,eg:Pe,extendedGroups:Pe,fg:Je,filteredGroups:Je,noOptions:ma,noResults:ga,resolving:ce,busy:ya,offset:r,select:Ze,deselect:et,remove:zt,selectAll:ka,clear:Gt,isSelected:je,isDisabled:St,isMax:Lt,getOption:Ie,handleOptionClick:xa,handleGroupClick:Oa,handleTagRemove:wa,refreshOptions:Ea,resolveOptions:pt,refreshLabels:Et}}function Ka(e,a,t){const{valueProp:o,showOptions:s,searchable:f,groupLabel:n,groups:d,mode:v,groupSelect:b,disabledProp:u,groupOptions:O}=xe(e),S=t.fo,x=t.fg,T=t.handleOptionClick,L=t.handleGroupClick,P=t.search,_=t.pointer,C=t.setPointer,c=t.clearPointer,k=t.multiselect,E=t.isOpen,y=ee(()=>S.value.filter(h=>!h[u.value])),B=ee(()=>x.value.filter(h=>!h[u.value])),W=se(()=>v.value!=="single"&&b.value),F=se(()=>_.value&&_.value.group),U=ee(()=>J(_.value)),K=ee(()=>{const h=F.value?_.value:J(_.value),j=B.value.map(de=>de[n.value]).indexOf(h[n.value]);let le=B.value[j-1];return le===void 0&&(le=Q.value),le}),D=ee(()=>{let h=B.value.map(j=>j.label).indexOf(F.value?_.value[n.value]:J(_.value)[n.value])+1;return B.value.length<=h&&(h=0),B.value[h]}),Q=ee(()=>[...B.value].slice(-1)[0]),Z=ee(()=>_.value.__VISIBLE__.filter(h=>!h[u.value])[0]),ie=ee(()=>{const h=U.value.__VISIBLE__.filter(j=>!j[u.value]);return h[h.map(j=>j[o.value]).indexOf(_.value[o.value])-1]}),w=ee(()=>{const h=J(_.value).__VISIBLE__.filter(j=>!j[u.value]);return h[h.map(j=>j[o.value]).indexOf(_.value[o.value])+1]}),R=ee(()=>[...K.value.__VISIBLE__.filter(h=>!h[u.value])].slice(-1)[0]),Oe=ee(()=>[...Q.value.__VISIBLE__.filter(h=>!h[u.value])].slice(-1)[0]),X=h=>_.value&&(!h.group&&_.value[o.value]===h[o.value]||h.group!==void 0&&_.value[n.value]===h[n.value])?!0:void 0,te=()=>{C(y.value[0]||null)},Y=()=>{!_.value||_.value[u.value]===!0||(F.value?L(_.value):T(_.value))},ue=()=>{if(_.value===null)C((d.value&&W.value?B.value[0].__CREATE__?y.value[0]:B.value[0]:y.value[0])||null);else if(d.value&&W.value){let h=F.value?Z.value:w.value;h===void 0&&(h=D.value,h.__CREATE__&&(h=h[O.value][0])),C(h||null)}else{let h=y.value.map(j=>j[o.value]).indexOf(_.value[o.value])+1;y.value.length<=h&&(h=0),C(y.value[h]||null)}it(()=>{$()})},ae=()=>{if(_.value===null){let h=y.value[y.value.length-1];d.value&&W.value&&(h=Oe.value,h===void 0&&(h=Q.value)),C(h||null)}else if(d.value&&W.value){let h=F.value?R.value:ie.value;h===void 0&&(h=F.value?K.value:U.value,h.__CREATE__&&(h=R.value,h===void 0&&(h=K.value))),C(h||null)}else{let h=y.value.map(j=>j[o.value]).indexOf(_.value[o.value])-1;h<0&&(h=y.value.length-1),C(y.value[h]||null)}it(()=>{$()})},J=h=>B.value.find(j=>j.__VISIBLE__.map(le=>le[o.value]).indexOf(h[o.value])!==-1),$=()=>{let h=k.value.querySelector("[data-pointed]");if(!h)return;let j=h.parentElement.parentElement;d.value&&(j=F.value?h.parentElement.parentElement.parentElement:h.parentElement.parentElement.parentElement.parentElement),h.offsetTop+h.offsetHeight>j.clientHeight+j.scrollTop&&(j.scrollTop=h.offsetTop+h.offsetHeight-j.clientHeight),h.offsetTop<j.scrollTop&&(j.scrollTop=h.offsetTop)};return ye(P,h=>{f.value&&(h.length&&s.value?te():c())}),ye(E,h=>{if(h&&k&&k.value){let j=k.value.querySelectorAll("[data-selected]")[0];if(!j)return;let le=j.parentElement.parentElement;it(()=>{le.scrollTop=j.offsetTop})}}),{pointer:_,canPointGroups:W,isPointed:X,setPointerFirst:te,selectPointer:Y,forwardPointer:ue,backwardPointer:ae}}function we(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var a=e.ownerDocument;return a&&a.defaultView||window}return e}function Xe(e){var a=we(e).Element;return e instanceof a||e instanceof Element}function ke(e){var a=we(e).HTMLElement;return e instanceof a||e instanceof HTMLElement}function Rt(e){if(typeof ShadowRoot>"u")return!1;var a=we(e).ShadowRoot;return e instanceof a||e instanceof ShadowRoot}var Ke=Math.max,wt=Math.min,at=Math.round;function It(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function ua(){return!/^((?!chrome|android).)*safari/i.test(It())}function lt(e,a,t){a===void 0&&(a=!1),t===void 0&&(t=!1);var o=e.getBoundingClientRect(),s=1,f=1;a&&ke(e)&&(s=e.offsetWidth>0&&at(o.width)/e.offsetWidth||1,f=e.offsetHeight>0&&at(o.height)/e.offsetHeight||1);var n=Xe(e)?we(e):window,d=n.visualViewport,v=!ua()&&t,b=(o.left+(v&&d?d.offsetLeft:0))/s,u=(o.top+(v&&d?d.offsetTop:0))/f,O=o.width/s,S=o.height/f;return{width:O,height:S,top:u,right:b+O,bottom:u+S,left:b,x:b,y:u}}function Vt(e){var a=we(e),t=a.pageXOffset,o=a.pageYOffset;return{scrollLeft:t,scrollTop:o}}function Xa(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ya(e){return e===we(e)||!ke(e)?Vt(e):Xa(e)}function Ae(e){return e?(e.nodeName||"").toLowerCase():null}function We(e){return((Xe(e)?e.ownerDocument:e.document)||window.document).documentElement}function $t(e){return lt(We(e)).left+Vt(e).scrollLeft}function Ve(e){return we(e).getComputedStyle(e)}function Nt(e){var a=Ve(e),t=a.overflow,o=a.overflowX,s=a.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+o)}function Ja(e){var a=e.getBoundingClientRect(),t=at(a.width)/e.offsetWidth||1,o=at(a.height)/e.offsetHeight||1;return t!==1||o!==1}function Qa(e,a,t){t===void 0&&(t=!1);var o=ke(a),s=ke(a)&&Ja(a),f=We(a),n=lt(e,s,t),d={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(o||!o&&!t)&&((Ae(a)!=="body"||Nt(f))&&(d=Ya(a)),ke(a)?(v=lt(a,!0),v.x+=a.clientLeft,v.y+=a.clientTop):f&&(v.x=$t(f))),{x:n.left+d.scrollLeft-v.x,y:n.top+d.scrollTop-v.y,width:n.width,height:n.height}}function da(e){var a=lt(e),t=e.offsetWidth,o=e.offsetHeight;return Math.abs(a.width-t)<=1&&(t=a.width),Math.abs(a.height-o)<=1&&(o=a.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:o}}function Ot(e){return Ae(e)==="html"?e:e.assignedSlot||e.parentNode||(Rt(e)?e.host:null)||We(e)}function ca(e){return["html","body","#document"].indexOf(Ae(e))>=0?e.ownerDocument.body:ke(e)&&Nt(e)?e:ca(Ot(e))}function ut(e,a){var t;a===void 0&&(a=[]);var o=ca(e),s=o===((t=e.ownerDocument)==null?void 0:t.body),f=we(o),n=s?[f].concat(f.visualViewport||[],Nt(o)?o:[]):o,d=a.concat(n);return s?d:d.concat(ut(Ot(n)))}function Za(e){return["table","td","th"].indexOf(Ae(e))>=0}function ta(e){return!ke(e)||Ve(e).position==="fixed"?null:e.offsetParent}function el(e){var a=/firefox/i.test(It()),t=/Trident/i.test(It());if(t&&ke(e)){var o=Ve(e);if(o.position==="fixed")return null}var s=Ot(e);for(Rt(s)&&(s=s.host);ke(s)&&["html","body"].indexOf(Ae(s))<0;){var f=Ve(s);if(f.transform!=="none"||f.perspective!=="none"||f.contain==="paint"||["transform","perspective"].indexOf(f.willChange)!==-1||a&&f.willChange==="filter"||a&&f.filter&&f.filter!=="none")return s;s=s.parentNode}return null}function kt(e){for(var a=we(e),t=ta(e);t&&Za(t)&&Ve(t).position==="static";)t=ta(t);return t&&(Ae(t)==="html"||Ae(t)==="body"&&Ve(t).position==="static")?a:t||el(e)||a}var Se="top",Be="bottom",Ne="right",Re="left",Wt="auto",_t=[Se,Be,Ne,Re],rt="start",dt="end",tl="clippingParents",fa="viewport",ot="popper",al="reference",aa=_t.reduce(function(e,a){return e.concat([a+"-"+rt,a+"-"+dt])},[]),ll=[].concat(_t,[Wt]).reduce(function(e,a){return e.concat([a,a+"-"+rt,a+"-"+dt])},[]),rl="beforeRead",sl="read",nl="afterRead",ol="beforeMain",il="main",ul="afterMain",dl="beforeWrite",cl="write",fl="afterWrite",vl=[rl,sl,nl,ol,il,ul,dl,cl,fl];function pl(e){var a=new Map,t=new Set,o=[];e.forEach(function(f){a.set(f.name,f)});function s(f){t.add(f.name);var n=[].concat(f.requires||[],f.requiresIfExists||[]);n.forEach(function(d){if(!t.has(d)){var v=a.get(d);v&&s(v)}}),o.push(f)}return e.forEach(function(f){t.has(f.name)||s(f)}),o}function bl(e){var a=pl(e);return vl.reduce(function(t,o){return t.concat(a.filter(function(s){return s.phase===o}))},[])}function ml(e){var a;return function(){return a||(a=new Promise(function(t){Promise.resolve().then(function(){a=void 0,t(e())})})),a}}function gl(e){var a=e.reduce(function(t,o){var s=t[o.name];return t[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,t},{});return Object.keys(a).map(function(t){return a[t]})}function hl(e,a){var t=we(e),o=We(e),s=t.visualViewport,f=o.clientWidth,n=o.clientHeight,d=0,v=0;if(s){f=s.width,n=s.height;var b=ua();(b||!b&&a==="fixed")&&(d=s.offsetLeft,v=s.offsetTop)}return{width:f,height:n,x:d+$t(e),y:v}}function yl(e){var a,t=We(e),o=Vt(e),s=(a=e.ownerDocument)==null?void 0:a.body,f=Ke(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),n=Ke(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),d=-o.scrollLeft+$t(e),v=-o.scrollTop;return Ve(s||t).direction==="rtl"&&(d+=Ke(t.clientWidth,s?s.clientWidth:0)-f),{width:f,height:n,x:d,y:v}}function wl(e,a){var t=a.getRootNode&&a.getRootNode();if(e.contains(a))return!0;if(t&&Rt(t)){var o=a;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Mt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function xl(e,a){var t=lt(e,!1,a==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function la(e,a,t){return a===fa?Mt(hl(e,t)):Xe(a)?xl(a,t):Mt(yl(We(e)))}function Ol(e){var a=ut(Ot(e)),t=["absolute","fixed"].indexOf(Ve(e).position)>=0,o=t&&ke(e)?kt(e):e;return Xe(o)?a.filter(function(s){return Xe(s)&&wl(s,o)&&Ae(s)!=="body"}):[]}function kl(e,a,t,o){var s=a==="clippingParents"?Ol(e):[].concat(a),f=[].concat(s,[t]),n=f[0],d=f.reduce(function(v,b){var u=la(e,b,o);return v.top=Ke(u.top,v.top),v.right=wt(u.right,v.right),v.bottom=wt(u.bottom,v.bottom),v.left=Ke(u.left,v.left),v},la(e,n,o));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function $e(e){return e.split("-")[0]}function st(e){return e.split("-")[1]}function va(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function pa(e){var a=e.reference,t=e.element,o=e.placement,s=o?$e(o):null,f=o?st(o):null,n=a.x+a.width/2-t.width/2,d=a.y+a.height/2-t.height/2,v;switch(s){case Se:v={x:n,y:a.y-t.height};break;case Be:v={x:n,y:a.y+a.height};break;case Ne:v={x:a.x+a.width,y:d};break;case Re:v={x:a.x-t.width,y:d};break;default:v={x:a.x,y:a.y}}var b=s?va(s):null;if(b!=null){var u=b==="y"?"height":"width";switch(f){case rt:v[b]=v[b]-(a[u]/2-t[u]/2);break;case dt:v[b]=v[b]+(a[u]/2-t[u]/2);break}}return v}function ba(){return{top:0,right:0,bottom:0,left:0}}function _l(e){return Object.assign({},ba(),e)}function Sl(e,a){return a.reduce(function(t,o){return t[o]=e,t},{})}function Ft(e,a){a===void 0&&(a={});var t=a,o=t.placement,s=o===void 0?e.placement:o,f=t.strategy,n=f===void 0?e.strategy:f,d=t.boundary,v=d===void 0?tl:d,b=t.rootBoundary,u=b===void 0?fa:b,O=t.elementContext,S=O===void 0?ot:O,x=t.altBoundary,T=x===void 0?!1:x,L=t.padding,P=L===void 0?0:L,_=_l(typeof P!="number"?P:Sl(P,_t)),C=S===ot?al:ot,c=e.rects.popper,k=e.elements[T?C:S],E=kl(Xe(k)?k:k.contextElement||We(e.elements.popper),v,u,n),y=lt(e.elements.reference),B=pa({reference:y,element:c,strategy:"absolute",placement:s}),W=Mt(Object.assign({},c,B)),F=S===ot?W:y,U={top:E.top-F.top+_.top,bottom:F.bottom-E.bottom+_.bottom,left:E.left-F.left+_.left,right:F.right-E.right+_.right},K=e.modifiersData.offset;if(S===ot&&K){var D=K[s];Object.keys(U).forEach(function(Q){var Z=[Ne,Be].indexOf(Q)>=0?1:-1,ie=[Se,Be].indexOf(Q)>=0?"y":"x";U[Q]+=D[ie]*Z})}return U}var ra={placement:"bottom",modifiers:[],strategy:"absolute"};function sa(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return!a.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Ll(e){e===void 0&&(e={});var a=e,t=a.defaultModifiers,o=t===void 0?[]:t,s=a.defaultOptions,f=s===void 0?ra:s;return function(d,v,b){b===void 0&&(b=f);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},ra,f),modifiersData:{},elements:{reference:d,popper:v},attributes:{},styles:{}},O=[],S=!1,x={state:u,setOptions:function(_){var C=typeof _=="function"?_(u.options):_;L(),u.options=Object.assign({},f,u.options,C),u.scrollParents={reference:Xe(d)?ut(d):d.contextElement?ut(d.contextElement):[],popper:ut(v)};var c=bl(gl([].concat(o,u.options.modifiers)));return u.orderedModifiers=c.filter(function(k){return k.enabled}),T(),x.update()},forceUpdate:function(){if(!S){var _=u.elements,C=_.reference,c=_.popper;if(sa(C,c)){u.rects={reference:Qa(C,kt(c),u.options.strategy==="fixed"),popper:da(c)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(U){return u.modifiersData[U.name]=Object.assign({},U.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var E=u.orderedModifiers[k],y=E.fn,B=E.options,W=B===void 0?{}:B,F=E.name;typeof y=="function"&&(u=y({state:u,options:W,name:F,instance:x})||u)}}}},update:ml(function(){return new Promise(function(P){x.forceUpdate(),P(u)})}),destroy:function(){L(),S=!0}};if(!sa(d,v))return x;x.setOptions(b).then(function(P){!S&&b.onFirstUpdate&&b.onFirstUpdate(P)});function T(){u.orderedModifiers.forEach(function(P){var _=P.name,C=P.options,c=C===void 0?{}:C,k=P.effect;if(typeof k=="function"){var E=k({state:u,name:_,instance:x,options:c}),y=function(){};O.push(E||y)}})}function L(){O.forEach(function(P){return P()}),O=[]}return x}}var mt={passive:!0};function Cl(e){var a=e.state,t=e.instance,o=e.options,s=o.scroll,f=s===void 0?!0:s,n=o.resize,d=n===void 0?!0:n,v=we(a.elements.popper),b=[].concat(a.scrollParents.reference,a.scrollParents.popper);return f&&b.forEach(function(u){u.addEventListener("scroll",t.update,mt)}),d&&v.addEventListener("resize",t.update,mt),function(){f&&b.forEach(function(u){u.removeEventListener("scroll",t.update,mt)}),d&&v.removeEventListener("resize",t.update,mt)}}var Tl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Cl,data:{}};function Pl(e){var a=e.state,t=e.name;a.modifiersData[t]=pa({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})}var El={name:"popperOffsets",enabled:!0,phase:"read",fn:Pl,data:{}},Al={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bl(e,a){var t=e.x,o=e.y,s=a.devicePixelRatio||1;return{x:at(t*s)/s||0,y:at(o*s)/s||0}}function na(e){var a,t=e.popper,o=e.popperRect,s=e.placement,f=e.variation,n=e.offsets,d=e.position,v=e.gpuAcceleration,b=e.adaptive,u=e.roundOffsets,O=e.isFixed,S=n.x,x=S===void 0?0:S,T=n.y,L=T===void 0?0:T,P=typeof u=="function"?u({x,y:L}):{x,y:L};x=P.x,L=P.y;var _=n.hasOwnProperty("x"),C=n.hasOwnProperty("y"),c=Re,k=Se,E=window;if(b){var y=kt(t),B="clientHeight",W="clientWidth";if(y===we(t)&&(y=We(t),Ve(y).position!=="static"&&d==="absolute"&&(B="scrollHeight",W="scrollWidth")),y=y,s===Se||(s===Re||s===Ne)&&f===dt){k=Be;var F=O&&y===E&&E.visualViewport?E.visualViewport.height:y[B];L-=F-o.height,L*=v?1:-1}if(s===Re||(s===Se||s===Be)&&f===dt){c=Ne;var U=O&&y===E&&E.visualViewport?E.visualViewport.width:y[W];x-=U-o.width,x*=v?1:-1}}var K=Object.assign({position:d},b&&Al),D=u===!0?Bl({x,y:L},we(t)):{x,y:L};if(x=D.x,L=D.y,v){var Q;return Object.assign({},K,(Q={},Q[k]=C?"0":"",Q[c]=_?"0":"",Q.transform=(E.devicePixelRatio||1)<=1?"translate("+x+"px, "+L+"px)":"translate3d("+x+"px, "+L+"px, 0)",Q))}return Object.assign({},K,(a={},a[k]=C?L+"px":"",a[c]=_?x+"px":"",a.transform="",a))}function Dl(e){var a=e.state,t=e.options,o=t.gpuAcceleration,s=o===void 0?!0:o,f=t.adaptive,n=f===void 0?!0:f,d=t.roundOffsets,v=d===void 0?!0:d,b={placement:$e(a.placement),variation:st(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:s,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,na(Object.assign({},b,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:n,roundOffsets:v})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,na(Object.assign({},b,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:v})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})}var ql={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Dl,data:{}};function jl(e){var a=e.state;Object.keys(a.elements).forEach(function(t){var o=a.styles[t]||{},s=a.attributes[t]||{},f=a.elements[t];!ke(f)||!Ae(f)||(Object.assign(f.style,o),Object.keys(s).forEach(function(n){var d=s[n];d===!1?f.removeAttribute(n):f.setAttribute(n,d===!0?"":d)}))})}function Il(e){var a=e.state,t={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,t.popper),a.styles=t,a.elements.arrow&&Object.assign(a.elements.arrow.style,t.arrow),function(){Object.keys(a.elements).forEach(function(o){var s=a.elements[o],f=a.attributes[o]||{},n=Object.keys(a.styles.hasOwnProperty(o)?a.styles[o]:t[o]),d=n.reduce(function(v,b){return v[b]="",v},{});!ke(s)||!Ae(s)||(Object.assign(s.style,d),Object.keys(f).forEach(function(v){s.removeAttribute(v)}))})}}var Ml={name:"applyStyles",enabled:!0,phase:"write",fn:jl,effect:Il,requires:["computeStyles"]},Rl=[Tl,El,ql,Ml],Vl=Ll({defaultModifiers:Rl});function $l(e){return e==="x"?"y":"x"}function ht(e,a,t){return Ke(e,wt(a,t))}function Nl(e,a,t){var o=ht(e,a,t);return o>t?t:o}function Wl(e){var a=e.state,t=e.options,o=e.name,s=t.mainAxis,f=s===void 0?!0:s,n=t.altAxis,d=n===void 0?!1:n,v=t.boundary,b=t.rootBoundary,u=t.altBoundary,O=t.padding,S=t.tether,x=S===void 0?!0:S,T=t.tetherOffset,L=T===void 0?0:T,P=Ft(a,{boundary:v,rootBoundary:b,padding:O,altBoundary:u}),_=$e(a.placement),C=st(a.placement),c=!C,k=va(_),E=$l(k),y=a.modifiersData.popperOffsets,B=a.rects.reference,W=a.rects.popper,F=typeof L=="function"?L(Object.assign({},a.rects,{placement:a.placement})):L,U=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),K=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,D={x:0,y:0};if(y){if(f){var Q,Z=k==="y"?Se:Re,ie=k==="y"?Be:Ne,w=k==="y"?"height":"width",R=y[k],Oe=R+P[Z],X=R-P[ie],te=x?-W[w]/2:0,Y=C===rt?B[w]:W[w],ue=C===rt?-W[w]:-B[w],ae=a.elements.arrow,J=x&&ae?da(ae):{width:0,height:0},$=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:ba(),h=$[Z],j=$[ie],le=ht(0,B[w],J[w]),de=c?B[w]/2-te-le-h-U.mainAxis:Y-le-h-U.mainAxis,Fe=c?-B[w]/2+te+le+j+U.mainAxis:ue+le+j+U.mainAxis,De=a.elements.arrow&&kt(a.elements.arrow),Le=De?k==="y"?De.clientTop||0:De.clientLeft||0:0,Ye=(Q=K==null?void 0:K[k])!=null?Q:0,nt=R+de-Ye-Le,Ce=R+Fe-Ye,Ue=ht(x?wt(Oe,nt):Oe,R,x?Ke(X,Ce):X);y[k]=Ue,D[k]=Ue-R}if(d){var Te,ge=k==="x"?Se:Re,ce=k==="x"?Be:Ne,m=y[E],r=E==="y"?"height":"width",M=m+P[ge],H=m-P[ce],pe=[Se,Re].indexOf(_)!==-1,re=(Te=K==null?void 0:K[E])!=null?Te:0,fe=pe?M:m-B[r]-W[r]-re+U.altAxis,_e=pe?m+B[r]+W[r]-re-U.altAxis:H,Pe=x&&pe?Nl(fe,m,_e):ht(x?fe:M,m,x?_e:H);y[E]=Pe,D[E]=Pe-m}a.modifiersData[o]=D}}var Fl={name:"preventOverflow",enabled:!0,phase:"main",fn:Wl,requiresIfExists:["offset"]},Ul={left:"right",right:"left",bottom:"top",top:"bottom"};function yt(e){return e.replace(/left|right|bottom|top/g,function(a){return Ul[a]})}var Hl={start:"end",end:"start"};function oa(e){return e.replace(/start|end/g,function(a){return Hl[a]})}function zl(e,a){a===void 0&&(a={});var t=a,o=t.placement,s=t.boundary,f=t.rootBoundary,n=t.padding,d=t.flipVariations,v=t.allowedAutoPlacements,b=v===void 0?ll:v,u=st(o),O=u?d?aa:aa.filter(function(T){return st(T)===u}):_t,S=O.filter(function(T){return b.indexOf(T)>=0});S.length===0&&(S=O);var x=S.reduce(function(T,L){return T[L]=Ft(e,{placement:L,boundary:s,rootBoundary:f,padding:n})[$e(L)],T},{});return Object.keys(x).sort(function(T,L){return x[T]-x[L]})}function Gl(e){if($e(e)===Wt)return[];var a=yt(e);return[oa(e),a,oa(a)]}function Kl(e){var a=e.state,t=e.options,o=e.name;if(!a.modifiersData[o]._skip){for(var s=t.mainAxis,f=s===void 0?!0:s,n=t.altAxis,d=n===void 0?!0:n,v=t.fallbackPlacements,b=t.padding,u=t.boundary,O=t.rootBoundary,S=t.altBoundary,x=t.flipVariations,T=x===void 0?!0:x,L=t.allowedAutoPlacements,P=a.options.placement,_=$e(P),C=_===P,c=v||(C||!T?[yt(P)]:Gl(P)),k=[P].concat(c).reduce(function(J,$){return J.concat($e($)===Wt?zl(a,{placement:$,boundary:u,rootBoundary:O,padding:b,flipVariations:T,allowedAutoPlacements:L}):$)},[]),E=a.rects.reference,y=a.rects.popper,B=new Map,W=!0,F=k[0],U=0;U<k.length;U++){var K=k[U],D=$e(K),Q=st(K)===rt,Z=[Se,Be].indexOf(D)>=0,ie=Z?"width":"height",w=Ft(a,{placement:K,boundary:u,rootBoundary:O,altBoundary:S,padding:b}),R=Z?Q?Ne:Re:Q?Be:Se;E[ie]>y[ie]&&(R=yt(R));var Oe=yt(R),X=[];if(f&&X.push(w[D]<=0),d&&X.push(w[R]<=0,w[Oe]<=0),X.every(function(J){return J})){F=K,W=!1;break}B.set(K,X)}if(W)for(var te=T?3:1,Y=function($){var h=k.find(function(j){var le=B.get(j);if(le)return le.slice(0,$).every(function(de){return de})});if(h)return F=h,"break"},ue=te;ue>0;ue--){var ae=Y(ue);if(ae==="break")break}a.placement!==F&&(a.modifiersData[o]._skip=!0,a.placement=F,a.reset=!0)}}var Xl={name:"flip",enabled:!0,phase:"main",fn:Kl,requiresIfExists:["offset"],data:{_skip:!1}};function Yl(e,a,t){const{disabled:o,appendTo:s,appendToBody:f,openDirection:n}=xe(e),d=ct().proxy,v=t.multiselect,b=t.dropdown,u=V(!1),O=V(null),S=V(null),x=se(()=>s.value||f.value),T=se(()=>n.value==="top"&&S.value==="bottom"||n.value==="bottom"&&S.value!=="top"?"bottom":"top"),L=()=>{u.value||o.value||(u.value=!0,a.emit("open",d),x.value&&it(()=>{_()}))},P=()=>{u.value&&(u.value=!1,a.emit("close",d))},_=()=>{if(!O.value)return;let c=parseInt(window.getComputedStyle(b.value).borderTopWidth.replace("px","")),k=parseInt(window.getComputedStyle(b.value).borderBottomWidth.replace("px",""));O.value.setOptions(E=>({...E,modifiers:[...E.modifiers,{name:"offset",options:{offset:[0,(T.value==="top"?c:k)*-1]}}]})),O.value.update()},C=c=>{for(;c&&c!==document.body;){if(getComputedStyle(c).position==="fixed")return!0;c=c.parentElement}return!1};return xt(()=>{x.value&&(O.value=Vl(v.value,b.value,{strategy:C(v.value)?"fixed":void 0,placement:n.value,modifiers:[Fl,Xl,{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:c})=>{c.styles.popper.width=`${c.rects.reference.width}px`},effect:({state:c})=>{c.elements.popper.style.width=`${c.elements.reference.offsetWidth}px`}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:c}){S.value=c.placement}}]}))}),qa(()=>{!x.value||!O.value||(O.value.destroy(),O.value=null)}),{popper:O,isOpen:u,open:L,close:P,placement:T,updatePopper:_}}function Jl(e,a,t){const{searchable:o,disabled:s,clearOnBlur:f}=xe(e),n=t.input,d=t.open,v=t.close,b=t.clearSearch,u=t.isOpen,O=t.wrapper,S=t.tags,x=V(!1),T=V(!1),L=se(()=>o.value||s.value?-1:0),P=()=>{o.value&&n.value.blur(),O.value.blur()},_=()=>{o.value&&!s.value&&n.value.focus()},C=(W=!0)=>{s.value||(x.value=!0,W&&d())},c=()=>{x.value=!1,setTimeout(()=>{x.value||(v(),f.value&&b())},1)};return{tabindex:L,isActive:x,mouseClicked:T,blur:P,focus:_,activate:C,deactivate:c,handleFocusIn:W=>{W.target.closest("[data-tags]")&&W.target.nodeName!=="INPUT"||W.target.closest("[data-clear]")||C(T.value)},handleFocusOut:()=>{c()},handleCaretClick:()=>{c(),P()},handleMousedown:W=>{T.value=!0,u.value&&(W.target.isEqualNode(O.value)||W.target.isEqualNode(S.value))?setTimeout(()=>{c()},0):!u.value&&(document.activeElement.isEqualNode(O.value)||document.activeElement.isEqualNode(n.value))&&C(),setTimeout(()=>{T.value=!1},0)}}}function Ql(e,a,t){const{mode:o,addTagOn:s,openDirection:f,searchable:n,showOptions:d,valueProp:v,groups:b,addOptionOn:u,createTag:O,createOption:S,reverse:x}=xe(e),T=ct().proxy,L=t.iv,P=t.update,_=t.deselect,C=t.search,c=t.setPointer,k=t.selectPointer,E=t.backwardPointer,y=t.forwardPointer,B=t.multiselect,W=t.wrapper,F=t.tags,U=t.isOpen,K=t.open,D=t.blur,Q=t.fo,Z=se(()=>O.value||S.value||!1),ie=se(()=>s.value!==void 0?s.value:u.value!==void 0?u.value:["enter"]),w=()=>{o.value==="tags"&&!d.value&&Z.value&&n.value&&!b.value&&c(Q.value[Q.value.map(X=>X[v.value]).indexOf(C.value)])};return{handleKeydown:X=>{a.emit("keydown",X,T);let te,Y;switch(["ArrowLeft","ArrowRight","Enter"].indexOf(X.key)!==-1&&o.value==="tags"&&(te=[...B.value.querySelectorAll("[data-tags] > *")].filter(ue=>ue!==F.value),Y=te.findIndex(ue=>ue===document.activeElement)),X.key){case"Backspace":if(o.value==="single"||n.value&&[null,""].indexOf(C.value)===-1||L.value.length===0)return;let ue=L.value.filter(ae=>!ae.disabled&&ae.remove!==!1);ue.length&&_(ue[ue.length-1]);break;case"Enter":if(X.preventDefault(),X.keyCode===229)return;if(Y!==-1&&Y!==void 0){P([...L.value].filter((ae,J)=>J!==Y)),Y===te.length-1&&(te.length-1?te[te.length-2].focus():n.value?F.value.querySelector("input").focus():W.value.focus());return}if(ie.value.indexOf("enter")===-1&&Z.value)return;w(),k();break;case" ":if(!Z.value&&!n.value){X.preventDefault(),w(),k();return}if(!Z.value)return!1;if(ie.value.indexOf("space")===-1&&Z.value)return;X.preventDefault(),w(),k();break;case"Tab":case";":case",":if(ie.value.indexOf(X.key.toLowerCase())===-1||!Z.value)return;w(),k(),X.preventDefault();break;case"Escape":D();break;case"ArrowUp":if(X.preventDefault(),!d.value)return;U.value||K(),E();break;case"ArrowDown":if(X.preventDefault(),!d.value)return;U.value||K(),y();break;case"ArrowLeft":if(n.value&&F.value&&F.value.querySelector("input").selectionStart||X.shiftKey||o.value!=="tags"||!L.value||!L.value.length)return;X.preventDefault(),Y===-1?te[te.length-1].focus():Y>0&&te[Y-1].focus();break;case"ArrowRight":if(Y===-1||X.shiftKey||o.value!=="tags"||!L.value||!L.value.length)return;X.preventDefault(),te.length>Y+1?te[Y+1].focus():n.value?F.value.querySelector("input").focus():n.value||W.value.focus();break}},handleKeyup:X=>{a.emit("keyup",X,T)},preparePointer:w}}function Zl(e,a,t){const{classes:o,disabled:s,showOptions:f,breakTags:n}=xe(e),d=t.isOpen,v=t.isPointed,b=t.isSelected,u=t.isDisabled,O=t.isActive,S=t.canPointGroups,x=t.resolving,T=t.fo,L=t.placement,P=se(()=>({container:"multiselect",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",wrapper:"multiselect-wrapper",singleLabel:"multiselect-single-label",singleLabelText:"multiselect-single-label-text",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagWrapper:"multiselect-tag-wrapper",tagWrapperBreak:"multiselect-tag-wrapper-break",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",inifinite:"multiselect-inifite",inifiniteSpinner:"multiselect-inifite-spinner",dropdown:"multiselect-dropdown",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option",optionPointed:"is-pointed",optionSelected:"is-selected",optionDisabled:"is-disabled",optionSelectedPointed:"is-selected is-pointed",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",assist:"multiselect-assistive-text",spacer:"multiselect-spacer",...o.value})),_=se(()=>!!(d.value&&f.value&&(!x.value||x.value&&T.value.length)));return{classList:ee(()=>{const c=P.value;return{container:[c.container].concat(s.value?c.containerDisabled:[]).concat(_.value&&L.value==="top"?c.containerOpenTop:[]).concat(_.value&&L.value!=="top"?c.containerOpen:[]).concat(O.value?c.containerActive:[]),wrapper:c.wrapper,spacer:c.spacer,singleLabel:c.singleLabel,singleLabelText:c.singleLabelText,multipleLabel:c.multipleLabel,search:c.search,tags:c.tags,tag:[c.tag].concat(s.value?c.tagDisabled:[]),tagWrapper:[c.tagWrapper,n.value?c.tagWrapperBreak:null],tagDisabled:c.tagDisabled,tagRemove:c.tagRemove,tagRemoveIcon:c.tagRemoveIcon,tagsSearchWrapper:c.tagsSearchWrapper,tagsSearch:c.tagsSearch,tagsSearchCopy:c.tagsSearchCopy,placeholder:c.placeholder,caret:[c.caret].concat(d.value?c.caretOpen:[]),clear:c.clear,clearIcon:c.clearIcon,spinner:c.spinner,inifinite:c.inifinite,inifiniteSpinner:c.inifiniteSpinner,dropdown:[c.dropdown].concat(L.value==="top"?c.dropdownTop:[]).concat(!d.value||!f.value||!_.value?c.dropdownHidden:[]),options:[c.options].concat(L.value==="top"?c.optionsTop:[]),group:c.group,groupLabel:k=>{let E=[c.groupLabel];return v(k)?E.push(b(k)?c.groupLabelSelectedPointed:c.groupLabelPointed):b(k)&&S.value?E.push(u(k)?c.groupLabelSelectedDisabled:c.groupLabelSelected):u(k)&&E.push(c.groupLabelDisabled),S.value&&E.push(c.groupLabelPointable),E},groupOptions:c.groupOptions,option:(k,E)=>{let y=[c.option];return v(k)?y.push(b(k)?c.optionSelectedPointed:c.optionPointed):b(k)?y.push(u(k)?c.optionSelectedDisabled:c.optionSelected):(u(k)||E&&u(E))&&y.push(c.optionDisabled),y},noOptions:c.noOptions,noResults:c.noResults,assist:c.assist,fakeInput:c.fakeInput}}),showDropdown:_}}function er(e,a,t){const{limit:o,infinite:s}=xe(e),f=t.isOpen,n=t.offset,d=t.search,v=t.pfo,b=t.eo,u=V(null),O=tt(null),S=se(()=>n.value<v.value.length),x=L=>{const{isIntersecting:P,target:_}=L[0];if(P){const C=_.offsetParent,c=C.scrollTop;n.value+=o.value==-1?10:o.value,it(()=>{C.scrollTop=c})}},T=()=>{f.value&&n.value<v.value.length?u.value.observe(O.value):!f.value&&u.value&&u.value.disconnect()};return ye(f,()=>{s.value&&T()}),ye(d,()=>{s.value&&(n.value=o.value,T())},{flush:"post"}),ye(b,()=>{s.value&&T()},{immediate:!1,flush:"post"}),xt(()=>{window&&window.IntersectionObserver&&(u.value=new IntersectionObserver(x))}),{hasMore:S,infiniteLoader:O}}function tr(e,a,t){const{placeholder:o,id:s,valueProp:f,label:n,mode:d,groupLabel:v,aria:b,searchable:u}=xe(e),O=t.pointer,S=t.iv,x=t.hasSelected,T=t.multipleLabelText,L=V(null),P=se(()=>`${s.value?s.value+"-":""}assist`),_=se(()=>`${s.value?s.value+"-":""}multiselect-options`),C=se(()=>{if(O.value){let D=s.value?`${s.value}-`:"";return D+=`${O.value.group?"multiselect-group":"multiselect-option"}-`,D+=O.value.group?O.value.index:O.value[f.value],D}}),c=se(()=>o.value),k=se(()=>d.value!=="single"),E=ee(()=>d.value==="single"&&x.value?S.value[n.value]:d.value==="multiple"&&x.value?T.value:d.value==="tags"&&x.value?S.value.map(D=>D[n.value]).join(", "):""),y=ee(()=>{let D={...b.value};return u.value&&(D["aria-labelledby"]=D["aria-labelledby"]?`${P.value} ${D["aria-labelledby"]}`:P.value,E.value&&D["aria-label"]&&(D["aria-label"]=`${E.value}, ${D["aria-label"]}`)),D}),B=D=>`${s.value?s.value+"-":""}multiselect-option-${D[f.value]}`,W=D=>`${s.value?s.value+"-":""}multiselect-group-${D.index}`,F=D=>`${D}`,U=D=>`${D}`,K=D=>`${D} ❎`;return xt(()=>{if(s.value&&document&&document.querySelector){let D=document.querySelector(`[for="${s.value}"]`);L.value=D?D.innerText:null}}),{arias:y,ariaLabel:E,ariaAssist:P,ariaControls:_,ariaPlaceholder:c,ariaMultiselectable:k,ariaActiveDescendant:C,ariaOptionId:B,ariaOptionLabel:F,ariaGroupId:W,ariaGroupLabel:U,ariaTagLabel:K}}function ar(e,a,t){const{locale:o,fallbackLocale:s}=xe(e);return{localize:n=>!n||typeof n!="object"?n:n&&n[o.value]?n[o.value]:n&&o.value&&n[o.value.toUpperCase()]?n[o.value.toUpperCase()]:n&&n[s.value]?n[s.value]:n&&s.value&&n[s.value.toUpperCase()]?n[s.value.toUpperCase()]:n&&Object.keys(n)[0]?n[Object.keys(n)[0]]:""}}function lr(e,a,t){const o=tt(null),s=tt(null),f=tt(null),n=tt(null),d=tt(null);return{multiselect:o,wrapper:s,tags:f,input:n,dropdown:d}}function rr(e,a,t,o={}){return t.forEach(s=>{o={...o,...s(e,a,o)}}),o}var Ut={name:"Multiselect",emits:["paste","open","close","select","deselect","input","search-change","tag","option","update:modelValue","change","clear","keydown","keyup","max","create"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1,default:void 0},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:[String,Array],required:!1,default:void 0},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!0},createTag:{type:Boolean,required:!1,default:void 0},createOption:{type:Boolean,required:!1,default:void 0},appendNewTag:{type:Boolean,required:!1,default:void 0},appendNewOption:{type:Boolean,required:!1,default:void 0},addTagOn:{type:Array,required:!1,default:void 0},addOptionOn:{type:Array,required:!1,default:void 0},caret:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:[String,Object],required:!1,default:"The list is empty"},noResultsText:{type:[String,Object],required:!1,default:"No results found"},multipleLabel:{type:Function,required:!1,default:void 0},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!0},closeOnDeselect:{type:Boolean,required:!1,default:!1},autocomplete:{type:String,required:!1,default:void 0},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},attrs:{required:!1,type:Object,default:()=>({})},onCreate:{required:!1,type:Function,default:void 0},disabledProp:{type:String,required:!1,default:"disabled"},searchStart:{type:Boolean,required:!1,default:!1},reverse:{type:Boolean,required:!1,default:!1},regex:{type:[Object,String,RegExp],required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},infinite:{type:Boolean,required:!1,default:!1},aria:{required:!1,type:Object,default:()=>({})},clearOnBlur:{required:!1,type:Boolean,default:!0},locale:{required:!1,type:String,default:null},fallbackLocale:{required:!1,type:String,default:"en"},searchFilter:{required:!1,type:Function,default:null},allowAbsent:{required:!1,type:Boolean,default:!1},appendToBody:{required:!1,type:Boolean,default:!1},closeOnScroll:{required:!1,type:Boolean,default:!1},breakTags:{required:!1,type:Boolean,default:!1},appendTo:{required:!1,type:String,default:void 0}},setup(e,a){return rr(e,a,[lr,ar,Wa,Ua,Yl,Fa,Na,Jl,Ga,er,Ka,Ql,Zl,tr])},beforeMount(){(this.$root.constructor&&this.$root.constructor.version&&this.$root.constructor.version.match(/^2\./)||this.vueVersionMs===2)&&(this.$options.components.Teleport||(this.$options.components.Teleport={render(){return this.$slots.default?this.$slots.default[0]:null}}))}};const sr=["id","dir"],nr=["tabindex","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable","role"],or=["type","modelValue","value","autocomplete","id","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],ir=["onKeyup","aria-label"],ur=["onClick"],dr=["type","modelValue","value","id","autocomplete","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],cr=["innerHTML"],fr=["id"],vr=["id"],pr=["id","aria-label","aria-selected"],br=["data-pointed","onMouseenter","onClick"],mr=["innerHTML"],gr=["aria-label"],hr=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],yr=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],wr=["innerHTML"],xr=["innerHTML"],Or=["value"],kr=["name","value"],_r=["name","value"],Sr=["id"];function Lr(e,a,t,o,s,f){return A(),q("div",{ref:"multiselect",class:G(e.classList.container),id:t.searchable?void 0:t.id,dir:t.rtl?"rtl":void 0,onFocusin:a[12]||(a[12]=(...n)=>e.handleFocusIn&&e.handleFocusIn(...n)),onFocusout:a[13]||(a[13]=(...n)=>e.handleFocusOut&&e.handleFocusOut(...n)),onKeyup:a[14]||(a[14]=(...n)=>e.handleKeyup&&e.handleKeyup(...n)),onKeydown:a[15]||(a[15]=(...n)=>e.handleKeydown&&e.handleKeydown(...n))},[l("div",At({class:e.classList.wrapper,onMousedown:a[9]||(a[9]=(...n)=>e.handleMousedown&&e.handleMousedown(...n)),ref:"wrapper",tabindex:e.tabindex,"aria-controls":t.searchable?void 0:e.ariaControls,"aria-placeholder":t.searchable?void 0:e.ariaPlaceholder,"aria-expanded":t.searchable?void 0:e.isOpen,"aria-activedescendant":t.searchable?void 0:e.ariaActiveDescendant,"aria-multiselectable":t.searchable?void 0:e.ariaMultiselectable,role:t.searchable?void 0:"combobox"},t.searchable?{}:e.arias),[I(" Search "),t.mode!=="tags"&&t.searchable&&!t.disabled?(A(),q("input",At({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.search,autocomplete:t.autocomplete,id:t.searchable?t.id:void 0,onInput:a[0]||(a[0]=(...n)=>e.handleSearchInput&&e.handleSearchInput(...n)),onKeypress:a[1]||(a[1]=(...n)=>e.handleKeypress&&e.handleKeypress(...n)),onPaste:a[2]||(a[2]=gt((...n)=>e.handlePaste&&e.handlePaste(...n),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,or)):I("v-if",!0),I(" Tags (with search) "),t.mode=="tags"?(A(),q("div",{key:1,class:G(e.classList.tags),"data-tags":""},[(A(!0),q(he,null,Me(e.iv,(n,d,v)=>be(e.$slots,"tag",{option:n,handleTagRemove:e.handleTagRemove,disabled:t.disabled},()=>[(A(),q("span",{class:G([e.classList.tag,n.disabled?e.classList.tagDisabled:null]),tabindex:"-1",onKeyup:Qt(b=>e.handleTagRemove(n,b),["enter"]),key:v,"aria-label":e.ariaTagLabel(e.localize(n[t.label]))},[l("span",{class:G(e.classList.tagWrapper)},N(e.localize(n[t.label])),3),!t.disabled&&!n.disabled?(A(),q("span",{key:0,class:G(e.classList.tagRemove),onClick:gt(b=>e.handleTagRemove(n,b),["stop"])},[l("span",{class:G(e.classList.tagRemoveIcon)},null,2)],10,ur)):I("v-if",!0)],42,ir))])),256)),l("div",{class:G(e.classList.tagsSearchWrapper),ref:"tags"},[I(" Used for measuring search width "),l("span",{class:G(e.classList.tagsSearchCopy)},N(e.search),3),I(" Actual search input "),t.searchable&&!t.disabled?(A(),q("input",At({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.tagsSearch,id:t.searchable?t.id:void 0,autocomplete:t.autocomplete,onInput:a[3]||(a[3]=(...n)=>e.handleSearchInput&&e.handleSearchInput(...n)),onKeypress:a[4]||(a[4]=(...n)=>e.handleKeypress&&e.handleKeypress(...n)),onPaste:a[5]||(a[5]=gt((...n)=>e.handlePaste&&e.handlePaste(...n),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,dr)):I("v-if",!0)],2)],2)):I("v-if",!0),I(" Single label "),t.mode=="single"&&e.hasSelected&&!e.search&&e.iv?be(e.$slots,"singlelabel",{key:2,value:e.iv},()=>[l("div",{class:G(e.classList.singleLabel)},[l("span",{class:G(e.classList.singleLabelText)},N(e.localize(e.iv[t.label])),3)],2)]):I("v-if",!0),I(" Multiple label "),t.mode=="multiple"&&e.hasSelected&&!e.search?be(e.$slots,"multiplelabel",{key:3,values:e.iv},()=>[l("div",{class:G(e.classList.multipleLabel),innerHTML:e.multipleLabelText},null,10,cr)]):I("v-if",!0),I(" Placeholder "),t.placeholder&&!e.hasSelected&&!e.search?be(e.$slots,"placeholder",{key:4},()=>[l("div",{class:G(e.classList.placeholder),"aria-hidden":"true"},N(t.placeholder),3)]):I("v-if",!0),I(" Spinner "),t.loading||e.resolving?be(e.$slots,"spinner",{key:5},()=>[l("span",{class:G(e.classList.spinner),"aria-hidden":"true"},null,2)]):I("v-if",!0),I(" Clear "),e.hasSelected&&!t.disabled&&t.canClear&&!e.busy?be(e.$slots,"clear",{key:6,clear:e.clear},()=>[l("span",{"aria-hidden":"true",tabindex:"0",role:"button","data-clear":"","aria-roledescription":"❎",class:G(e.classList.clear),onClick:a[6]||(a[6]=(...n)=>e.clear&&e.clear(...n)),onKeyup:a[7]||(a[7]=Qt((...n)=>e.clear&&e.clear(...n),["enter"]))},[l("span",{class:G(e.classList.clearIcon)},null,2)],34)]):I("v-if",!0),I(" Caret "),t.caret&&t.showOptions?be(e.$slots,"caret",{key:7,handleCaretClick:e.handleCaretClick,isOpen:e.isOpen},()=>[l("span",{class:G(e.classList.caret),onClick:a[8]||(a[8]=(...n)=>e.handleCaretClick&&e.handleCaretClick(...n)),"aria-hidden":"true"},null,2)]):I("v-if",!0)],16,nr),I(" Options "),(A(),Ba(Da,{to:t.appendTo||"body",disabled:!t.appendToBody&&!t.appendTo},[l("div",{id:t.id?`${t.id}-dropdown`:void 0,class:G(e.classList.dropdown),tabindex:"-1",ref:"dropdown",onFocusin:a[10]||(a[10]=(...n)=>e.handleFocusIn&&e.handleFocusIn(...n)),onFocusout:a[11]||(a[11]=(...n)=>e.handleFocusOut&&e.handleFocusOut(...n))},[be(e.$slots,"beforelist",{options:e.fo}),l("ul",{class:G(e.classList.options),id:e.ariaControls,role:"listbox"},[t.groups?(A(!0),q(he,{key:0},Me(e.fg,(n,d,v)=>(A(),q("li",{class:G(e.classList.group),key:v,id:e.ariaGroupId(n),"aria-label":e.ariaGroupLabel(e.localize(n[t.groupLabel])),"aria-selected":e.isSelected(n),role:"option"},[n.__CREATE__?I("v-if",!0):(A(),q("div",{key:0,class:G(e.classList.groupLabel(n)),"data-pointed":e.isPointed(n),onMouseenter:b=>e.setPointer(n,d),onClick:b=>e.handleGroupClick(n)},[be(e.$slots,"grouplabel",{group:n,isSelected:e.isSelected,isPointed:e.isPointed},()=>[l("span",{innerHTML:e.localize(n[t.groupLabel])},null,8,mr)])],42,br)),l("ul",{class:G(e.classList.groupOptions),"aria-label":e.ariaGroupLabel(e.localize(n[t.groupLabel])),role:"group"},[(A(!0),q(he,null,Me(n.__VISIBLE__,(b,u,O)=>(A(),q("li",{class:G(e.classList.option(b,n)),"data-pointed":e.isPointed(b),"data-selected":e.isSelected(b)||void 0,key:O,onMouseenter:S=>e.setPointer(b),onClick:S=>e.handleOptionClick(b),id:e.ariaOptionId(b),"aria-selected":e.isSelected(b),"aria-label":e.ariaOptionLabel(e.localize(b[t.label])),role:"option"},[be(e.$slots,"option",{option:b,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[l("span",null,N(e.localize(b[t.label])),1)])],42,hr))),128))],10,gr)],10,pr))),128)):(A(!0),q(he,{key:1},Me(e.fo,(n,d,v)=>(A(),q("li",{class:G(e.classList.option(n)),"data-pointed":e.isPointed(n),"data-selected":e.isSelected(n)||void 0,key:v,onMouseenter:b=>e.setPointer(n),onClick:b=>e.handleOptionClick(n),id:e.ariaOptionId(n),"aria-selected":e.isSelected(n),"aria-label":e.ariaOptionLabel(e.localize(n[t.label])),role:"option"},[be(e.$slots,"option",{option:n,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[l("span",null,N(e.localize(n[t.label])),1)])],42,yr))),128))],10,vr),e.noOptions?be(e.$slots,"nooptions",{key:0},()=>[l("div",{class:G(e.classList.noOptions),innerHTML:e.localize(t.noOptionsText)},null,10,wr)]):I("v-if",!0),e.noResults?be(e.$slots,"noresults",{key:1},()=>[l("div",{class:G(e.classList.noResults),innerHTML:e.localize(t.noResultsText)},null,10,xr)]):I("v-if",!0),t.infinite&&e.hasMore?(A(),q("div",{key:2,class:G(e.classList.inifinite),ref:"infiniteLoader"},[be(e.$slots,"infinite",{},()=>[l("span",{class:G(e.classList.inifiniteSpinner)},null,2)])],2)):I("v-if",!0),be(e.$slots,"afterlist",{options:e.fo})],42,fr)],8,["to","disabled"])),I(" Hacky input element to show HTML5 required warning "),t.required?(A(),q("input",{key:0,class:G(e.classList.fakeInput),tabindex:"-1",value:e.textValue,required:""},null,10,Or)):I("v-if",!0),I(" Native input support "),t.nativeSupport?(A(),q(he,{key:1},[t.mode=="single"?(A(),q("input",{key:0,type:"hidden",name:t.name,value:e.plainValue!==void 0?e.plainValue:""},null,8,kr)):(A(!0),q(he,{key:1},Me(e.plainValue,(n,d)=>(A(),q("input",{type:"hidden",name:`${t.name}[]`,value:n,key:d},null,8,_r))),128))],64)):I("v-if",!0),I(" Screen reader assistive text "),t.searchable&&e.hasSelected?(A(),q("div",{key:2,class:G(e.classList.assist),id:e.ariaAssist,"aria-hidden":"true"},N(e.ariaLabel),11,Sr)):I("v-if",!0),I(" Create height for empty input "),l("div",{class:G(e.classList.spacer)},null,2)],42,sr)}Ut.render=Lr;Ut.__file="src/Multiselect.vue";const Cr={class:"container mx-auto px-4 py-8"},Tr={class:"max-w-7xl mx-auto"},Pr={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20"},Er={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8"},Ar={class:"flex","aria-label":"Breadcrumb"},Br={class:"inline-flex items-center space-x-1 md:space-x-3"},Dr={class:"inline-flex items-center"},qr={class:"mb-6"},jr={class:"flex flex-col sm:flex-row gap-4"},Ir={class:"flex-1"},Mr={class:"relative"},Rr={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Vr={class:"overflow-x-auto"},$r={class:"min-w-full table-auto divide-y divide-gray-200"},Nr={class:"bg-white divide-y divide-gray-200"},Wr={key:0,class:"animate-pulse"},Fr={key:1,class:"hover:bg-gray-50"},Ur={class:"td-base"},Hr=["title"],zr={class:"td-base"},Gr={class:"td-base"},Kr={class:"td-base"},Xr={class:"flex items-center gap-2"},Yr=["onClick"],Jr={key:0,class:"text-xs text-gray-500 mt-1"},Qr={key:0},Zr={key:1,class:"mx-1"},es={key:2},ts={class:"td-base"},as={class:"td-base"},ls={class:"flex items-center gap-2 flex-wrap"},rs={key:1,class:"text-gray-400"},ss={class:"td-base"},ns={class:"td-base"},os={class:"td-base"},is={class:"td-base"},us=["title"],ds=["title"],cs={class:"td-base"},fs={class:"td-base"},vs={class:"td-base"},ps={class:"td-base"},bs={class:"td-base font-medium"},ms={class:"action-buttons"},gs=["onClick"],hs=["onClick"],ys=["onClick"],ws={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},xs={class:"flex-1 flex justify-between sm:hidden"},Os=["disabled"],ks=["disabled"],_s={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ss={class:"text-sm text-gray-700"},Ls={class:"font-medium"},Cs={class:"font-medium"},Ts={class:"font-medium"},Ps={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Es=["disabled"],As=["onClick"],Bs={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Ds=["disabled"],qs={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-50 flex items-center justify-center p-4"},js={class:"relative mx-auto px-6 md:px-8 py-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white h-[80vh] max-h-[80vh] overflow-hidden flex flex-col min-h-0"},Is={class:"mt-1 flex flex-col h-full min-h-0"},Ms={class:"flex items-center justify-between mb-4 shrink-0 sticky top-0 bg-white z-10 pb-2"},Rs={class:"text-lg font-medium text-gray-900"},Vs={class:"flex-1 overflow-y-scroll pr-1 min-h-0 px-4 md:px-6"},$s={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},Ns={key:0,class:"text-red-500 text-xs mt-1"},Ws={key:0,class:"text-red-500 text-xs mt-1"},Fs=["value"],Us={key:0,class:"text-red-500 text-xs mt-1"},Hs={key:0,class:"text-red-500 text-xs mt-1"},zs={class:"text-xs text-gray-500 mt-1"},Gs={class:"md:col-span-2"},Ks={class:"md:col-span-2"},Xs={class:"flex justify-end space-x-3 pt-4 border-t mt-4 bg-white shrink-0 sticky bottom-0 z-10 px-4 md:px-6"},Ys=["disabled"],Js={key:0,class:"fas fa-spinner fa-spin mr-2"},Qs={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Zs={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},en={class:"mt-3 text-center"},tn={class:"mt-2 px-7 py-3"},an={class:"text-sm text-gray-500"},ln={class:"flex justify-center space-x-3 pt-4"},rn=["disabled"],sn={key:0,class:"fas fa-spinner fa-spin mr-2"},nn={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-50 flex items-center justify-center p-4"},on={class:"relative mx-auto px-6 py-5 border w-96 shadow-lg rounded-md bg-white"},un={class:"space-y-4"},dn={class:"flex items-center gap-6"},cn={class:"inline-flex items-center gap-2"},fn={class:"inline-flex items-center gap-2"},vn={class:"text-sm text-gray-700 space-y-1"},pn={key:0,class:"text-gray-500 flex items-center gap-2"},bn={class:"font-semibold"},mn={class:"font-semibold"},gn={class:"font-semibold"},hn=["max"],yn={key:0,class:"text-red-600 text-xs mt-1"},wn={key:0},xn={key:1},On=["min"],kn={class:"mt-5 flex justify-end gap-3"},_n=["disabled"],Sn={key:0,class:"fas fa-spinner fa-spin mr-2"},En={__name:"EarthData",setup(e){const{showToast:a}=Ia(),t=V([]),o=V(!1),s=V(null),f=V(""),n=V(""),d=V(""),v=V("created_at"),b=V("desc"),u=V(!1),O=V(!1),S=V(!1),x=V(!1),T=V(!1),L=V(null),P=V(!1),_=V(null),C=V("add"),c=V(1),k=V(""),E=V(""),y=V(!1),B=V({total:0,verified:0,pending:0}),W=V(!1),F=V(!1),U=V(null),K=V({total:0,verified:0,pending:0}),D=V(1),Q=V(!1),Z=V([]),ie=V([]);Bt({}),Bt({});const w=Bt({id:null,batch_no:"",issue_date:"",issue_count:0,customer_id:0,valid_date_from:"",valid_date_to:"",cleaner_ids:[],project_name:"",flow_control_no:"",carry_qty:0,carry_soil_type:"",status_desc:"",remark_desc:"",sys_serial_no:"",status:"active"}),R=V({});let Oe=null;const X=()=>{clearTimeout(Oe),Oe=setTimeout(()=>{ae()},500)},te=async()=>{try{const m=await ea.cleaners();m.status&&(Z.value=Array.isArray(m.data)?m.data:[])}catch{}},Y=async()=>{try{const m=await ea.customers();m.status&&(ie.value=Array.isArray(m.data)?m.data:[])}catch{}},ue=ee(()=>{if(!s.value)return[];const m=s.value.current_page,r=s.value.last_page,M=[];if(r<=7)for(let H=1;H<=r;H++)M.push(H);else if(m<=4){for(let H=1;H<=5;H++)M.push(H);M.push("..."),M.push(r)}else if(m>=r-3){M.push(1),M.push("...");for(let H=r-4;H<=r;H++)M.push(H)}else{M.push(1),M.push("...");for(let H=m-1;H<=m+1;H++)M.push(H);M.push("..."),M.push(r)}return M}),ae=async(m=1)=>{var r;try{o.value=!0;const M=await Ge.list({page:m,search:f.value,issue_date_from:n.value,issue_date_to:d.value,sort_by:v.value,sort_order:b.value,per_page:15});if(M.status)t.value=Array.isArray((r=M.data)==null?void 0:r.data)?M.data.data:[],s.value={current_page:M.data.current_page,last_page:M.data.last_page,per_page:M.data.per_page,total:M.data.total,from:M.data.from,to:M.data.to};else throw new Error(M.message||"載入土單資料失敗")}catch(M){console.error("載入土單資料錯誤:",M),a(M.message||"載入土單資料失敗","error")}finally{o.value=!1}},J=m=>{m>=1&&m<=s.value.last_page&&ae(m)},$=()=>{S.value=!1,Ue(),Z.value.length===0&&te(),ie.value.length===0&&Y(),u.value=!0},h=m=>{S.value=!0,w.id=m.id,w.batch_no=m.batch_no||"",m.cleaners&&Array.isArray(m.cleaners)&&m.cleaners.length>0?w.cleaner_ids=m.cleaners.map(r=>r.id):w.cleaner_ids=[],w.project_name=m.project_name||"",w.flow_control_no=m.flow_control_no||"",w.issue_date=m.issue_date||"",w.issue_count=m.issue_count??0,w.customer_id=m.customer_id||0,w.valid_date_from=m.valid_date_from||"",w.valid_date_to=m.valid_date_to||"",w.carry_qty=m.carry_qty??0,w.carry_soil_type=m.carry_soil_type||"",w.status_desc=m.status_desc||"",w.remark_desc=m.remark_desc||"",w.sys_serial_no=m.sys_serial_no||"",w.status=m.status||"active",Z.value.length===0&&te(),ie.value.length===0&&Y(),R.value={},u.value=!0},j=m=>{L.value=m,O.value=!0},le=()=>{u.value=!1,Ue(),R.value={}},de=()=>{O.value=!1,L.value=null},Fe=async m=>{var r;_.value=m,C.value="add",c.value=1,k.value="",E.value="",B.value={total:0,verified:0,pending:0},P.value=!0,W.value=!0;try{const M=await Ge.usageStats(m.id);M.status&&(B.value=((r=M.data)==null?void 0:r.totals)||{total:0,verified:0,pending:0})}catch{}finally{W.value=!1}},De=()=>{P.value=!1,_.value=null},Le=async()=>{var m,r,M;if(_.value)try{if(y.value=!0,C.value==="remove"){const re=Number(((m=B.value)==null?void 0:m.pending)||0),fe=Number(c.value||0);if(!Number.isFinite(fe)||fe<=0){a("請輸入正確的數量","error");return}if(fe>re){a(`減少數量不可超過未印張數（${re}）`,"error");return}}const H={action:C.value,count:c.value};C.value==="add"&&(k.value&&(H.use_start_date=k.value),E.value&&(H.use_end_date=E.value));const pe=await Ge.adjustDetails(_.value.id,H);if(pe.status){const re=(r=pe.data)==null?void 0:r.issue_count;typeof re=="number"?_.value.issue_count=re:await ae(((M=s.value)==null?void 0:M.current_page)||1),C.value==="add"?(B.value.total=Number(B.value.total||0)+Number(c.value||0),B.value.pending=Number(B.value.pending||0)+Number(c.value||0)):C.value==="remove"&&(B.value.total=Math.max(0,Number(B.value.total||0)-Number(c.value||0)),B.value.pending=Math.max(0,Number(B.value.pending||0)-Number(c.value||0))),a("調整成功","success"),De()}else throw new Error(pe.message||"調整失敗")}catch(H){a(H.message||"調整失敗","error")}finally{y.value=!1}},Ye=async m=>{var r;if(!(!m||!m.id)){U.value=m,D.value=1,K.value={total:0,verified:0,pending:0},F.value=!0,Q.value=!0;try{const M=await Ge.usageStats(m.id);if(M.status){const H=((r=M.data)==null?void 0:r.totals)||{},pe=Number(H.total??0),re=Number(H.verified??0),fe=Math.max(0,pe-re);K.value={total:pe,verified:re,pending:fe},D.value>fe&&(D.value=fe||1)}else a(M.message||"取得統計失敗","error")}catch(M){a(M.message||"取得統計失敗","error")}finally{Q.value=!1}}},nt=()=>{F.value=!1,U.value=null},Ce=()=>{var H;const m=Number(K.value.pending||0);let r=Number(D.value||0);if(!((H=U.value)!=null&&H.id))return;if(!Number.isFinite(r)||r<=0){a("請輸入正確的列印數量","error");return}if(r>m){a(`本次列印數量不可超過未印數量（${m}）`,"error");return}const M=`/print/earth-data/${U.value.id}/pending?count=${r}`;window.open(M,"_blank"),nt()},Ue=()=>{w.id=null,w.batch_no="",w.issue_date="",w.issue_count=0,w.customer_id=0,w.valid_date_from="",w.valid_date_to="",w.cleaner_ids=[],w.project_name="",w.flow_control_no="",w.carry_qty=0,w.carry_soil_type="",w.status_desc="",w.remark_desc="",w.sys_serial_no="",w.status="active"},Te=async()=>{try{x.value=!0,R.value={};let m;if(S.value?m=await Ge.update(w.id,w):m=await Ge.create(w),m.status)a(S.value?"土單更新成功":"土單建立成功","success"),le(),ae();else if(m.errors)R.value=m.errors;else throw new Error(m.message||"操作失敗")}catch(m){console.error("提交表單錯誤:",m),a(m.message||"操作失敗","error")}finally{x.value=!1}},ge=async()=>{try{T.value=!0;const m=await Ge.delete(L.value.id);if(m.status)a("土單刪除成功","success"),de(),ae();else throw new Error(m.message||"刪除失敗")}catch(m){console.error("刪除土單錯誤:",m),a(m.message||"刪除失敗","error")}finally{T.value=!1}},ce=m=>m?new Date(m).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"-";return ye([v,b],()=>{ae()}),xt(()=>{ae(),te(),Y()}),(m,r)=>{var H,pe,re,fe,_e,Pe,ft,Je;const M=Va("router-link");return A(),q(he,null,[l("div",Cr,[l("div",Tr,[l("div",Pr,[l("div",Er,[l("div",null,[r[32]||(r[32]=l("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"土單資料管理",-1)),l("nav",Ar,[l("ol",Br,[l("li",Dr,[Dt(M,{to:"/dashboard",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-amber-600 transition-colors duration-200"},{default:Ma(()=>[...r[30]||(r[30]=[l("i",{class:"fas fa-home mr-2"},null,-1),me(" Dashboard ",-1)])]),_:1})]),r[31]||(r[31]=l("li",null,[l("div",{class:"flex items-center"},[l("i",{class:"fas fa-chevron-right text-gray-400 mr-2"}),l("span",{class:"text-sm font-medium text-gray-500"},"土單資料管理")])],-1))])])]),l("div",{class:"flex flex-col sm:flex-row gap-4 mt-4 sm:mt-0"},[l("button",{onClick:$,class:"bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[...r[33]||(r[33]=[l("svg",{class:"w-5 h-5 mr-2 inline",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),me(" 新增工程 ",-1)])])])]),l("div",qr,[l("div",jr,[l("div",Ir,[l("div",Mr,[oe(l("input",{"onUpdate:modelValue":r[0]||(r[0]=p=>f.value=p),onInput:X,type:"text",placeholder:"搜尋（批號、客戶、工程名稱）",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},null,544),[[ve,f.value]]),r[34]||(r[34]=l("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[l("i",{class:"fas fa-search text-gray-400"})],-1))])]),oe(l("input",{"onUpdate:modelValue":r[1]||(r[1]=p=>n.value=p),onChange:r[2]||(r[2]=p=>ae()),type:"date",class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},null,544),[[ve,n.value]]),r[37]||(r[37]=l("span",{class:"self-center text-gray-500"},"~",-1)),oe(l("input",{"onUpdate:modelValue":r[3]||(r[3]=p=>d.value=p),onChange:r[4]||(r[4]=p=>ae()),type:"date",class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},null,544),[[ve,d.value]]),oe(l("select",{"onUpdate:modelValue":r[5]||(r[5]=p=>v.value=p),onChange:ae,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...r[35]||(r[35]=[l("option",{value:"created_at"},"建立時間",-1),l("option",{value:"issue_date"},"開立日期",-1),l("option",{value:"batch_no"},"批號",-1)])],544),[[qt,v.value]]),oe(l("select",{"onUpdate:modelValue":r[6]||(r[6]=p=>b.value=p),onChange:ae,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...r[36]||(r[36]=[l("option",{value:"desc"},"降序",-1),l("option",{value:"asc"},"升序",-1)])],544),[[qt,b.value]])])]),l("div",Rr,[l("div",Vr,[l("table",$r,[r[43]||(r[43]=l("thead",{class:"bg-gradient-to-r from-amber-50 to-orange-50"},[l("tr",null,[l("th",{class:"th-base min-w-[120px]"},"批號"),l("th",{class:"th-base min-w-[160px]"},"工程名稱"),l("th",{class:"th-base min-w-[140px]"},"管制編號"),l("th",{class:"th-base min-w-[120px]"},"開立日期"),l("th",{class:"th-base min-w-[110px]"},"開立張數"),l("th",{class:"th-base min-w-[120px]"},"客戶"),l("th",{class:"th-base min-w-[110px]"},"清運業者"),l("th",{class:"th-base min-w-[100px]"},"有效起"),l("th",{class:"th-base min-w-[100px]"},"有效迄"),l("th",{class:"th-base min-w-[110px]"},"載運數量"),l("th",{class:"th-base min-w-[120px]"},"載運土質"),l("th",{class:"th-base min-w-[160px]"},"狀態說明"),l("th",{class:"th-base min-w-[160px]"},"備註說明"),l("th",{class:"th-base min-w-[110px]"},"建檔人員"),l("th",{class:"th-base min-w-[110px]"},"修改人員"),l("th",{class:"th-base min-w-[140px]"},"系統流水號"),l("th",{class:"th-base min-w-[90px]"},"狀態"),l("th",{class:"th-base min-w-[100px]"},"操作")])],-1)),l("tbody",Nr,[o.value?(A(),q("tr",Wr,[...r[38]||(r[38]=[l("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500"},[l("i",{class:"fas fa-spinner fa-spin text-2xl mb-2"}),l("div",null,"載入中...")],-1)])])):t.value.length===0?(A(),q("tr",Fr,[...r[39]||(r[39]=[l("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500"},[l("i",{class:"fas fa-file-alt text-4xl mb-4 text-gray-300"}),l("div",{class:"text-lg font-medium"},"沒有找到土單資料"),l("div",{class:"text-sm"},"請嘗試調整搜尋條件或新增土單")],-1)])])):(A(!0),q(he,{key:2},Me(t.value,p=>(A(),q("tr",{key:p.id,class:"hover:bg-gray-50 transition-colors duration-200"},[l("td",Ur,N(p.batch_no),1),l("td",{class:"td-base truncate max-w-[20rem]",title:p.project_name},N(p.project_name),9,Hr),l("td",zr,N(p.flow_control_no),1),l("td",Gr,N(ce(p.issue_date)),1),l("td",Kr,[l("div",Xr,[l("span",null,N(p.issue_count??0),1),l("button",{onClick:qe=>Fe(p),class:"btn-adjust",title:"調整張數"},"調整",8,Yr)]),p.voided_count||p.recycled_count?(A(),q("div",Jr,[p.voided_count?(A(),q("span",Qr,"作廢："+N(p.voided_count),1)):I("",!0),p.voided_count&&p.recycled_count?(A(),q("span",Zr,"/")):I("",!0),p.recycled_count?(A(),q("span",es,"回收："+N(p.recycled_count),1)):I("",!0)])):I("",!0)]),l("td",ts,N(p.customer_name||"-"),1),l("td",as,[l("div",ls,[p.cleaners&&p.cleaners.length>0?(A(!0),q(he,{key:0},Me(p.cleaners,qe=>(A(),q("span",{key:qe.id,class:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-50 text-blue-700 border border-blue-200"},N(qe.cleaner_name),1))),128)):(A(),q("span",rs,"-"))])]),l("td",ss,N(ce(p.valid_date_from)),1),l("td",ns,N(ce(p.valid_date_to)),1),l("td",os,N(p.carry_qty),1),l("td",is,N(p.carry_soil_type),1),l("td",{class:"td-base truncate max-w-[20rem]",title:p.status_desc},N(p.status_desc||"-"),9,us),l("td",{class:"td-base truncate max-w-[20rem]",title:p.remark_desc},N(p.remark_desc||"-"),9,ds),l("td",cs,N(p.created_by_name),1),l("td",fs,N(p.updated_by_name),1),l("td",vs,N(p.sys_serial_no),1),l("td",ps,N(p.status),1),l("td",bs,[l("div",ms,[l("button",{onClick:qe=>h(p),class:"action-btn action-btn--edit",title:"編輯"},[...r[40]||(r[40]=[l("i",{class:"fas fa-edit action-icon"},null,-1)])],8,gs),l("button",{onClick:qe=>j(p),class:"action-btn action-btn--delete",title:"刪除"},[...r[41]||(r[41]=[l("i",{class:"fas fa-trash action-icon"},null,-1)])],8,hs),l("button",{onClick:qe=>Ye(p),class:"action-btn action-btn--print",title:"列印未列印"},[...r[42]||(r[42]=[l("i",{class:"fas fa-print action-icon"},null,-1)])],8,ys)])])]))),128))])])]),s.value&&s.value.last_page>1?(A(),q("div",ws,[l("div",xs,[l("button",{onClick:r[7]||(r[7]=p=>J(s.value.current_page-1)),disabled:s.value.current_page<=1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"上一頁",8,Os),l("button",{onClick:r[8]||(r[8]=p=>J(s.value.current_page+1)),disabled:s.value.current_page>=s.value.last_page,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"下一頁",8,ks)]),l("div",_s,[l("div",null,[l("p",Ss,[r[44]||(r[44]=me(" 顯示第 ",-1)),l("span",Ls,N(s.value.from||0),1),r[45]||(r[45]=me(" 到 ",-1)),l("span",Cs,N(s.value.to||0),1),r[46]||(r[46]=me(" 筆，共 ",-1)),l("span",Ts,N(s.value.total),1),r[47]||(r[47]=me(" 筆資料 ",-1))])]),l("div",null,[l("nav",Ps,[l("button",{onClick:r[9]||(r[9]=p=>J(s.value.current_page-1)),disabled:s.value.current_page<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...r[48]||(r[48]=[l("i",{class:"fas fa-chevron-left"},null,-1)])],8,Es),(A(!0),q(he,null,Me(ue.value,p=>(A(),q(he,{key:p},[p!=="..."?(A(),q("button",{key:0,onClick:qe=>J(p),class:G([p===s.value.current_page?"z-10 bg-amber-50 border-amber-500 text-amber-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},N(p),11,As)):(A(),q("span",Bs,"..."))],64))),128)),l("button",{onClick:r[10]||(r[10]=p=>J(s.value.current_page+1)),disabled:s.value.current_page>=s.value.last_page,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...r[49]||(r[49]=[l("i",{class:"fas fa-chevron-right"},null,-1)])],8,Ds)])])])])):I("",!0)])])]),u.value?(A(),q("div",qs,[l("div",js,[l("div",Is,[l("div",Ms,[l("h3",Rs,N(S.value?"編輯土單":"新增土單"),1),l("button",{onClick:le,class:"text-gray-400 hover:text-gray-600"},[...r[50]||(r[50]=[l("i",{class:"fas fa-times text-xl"},null,-1)])])]),l("form",{onSubmit:gt(Te,["prevent"]),class:"flex flex-col h-full min-h-0"},[l("div",Vs,[l("div",$s,[l("div",null,[r[51]||(r[51]=l("label",{class:"label-base"},"批號 *",-1)),oe(l("input",{"onUpdate:modelValue":r[11]||(r[11]=p=>w.batch_no=p),type:"text",required:"",class:G(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":R.value.batch_no}])},null,2),[[ve,w.batch_no]]),R.value.batch_no?(A(),q("p",Ns,N(R.value.batch_no),1)):I("",!0)]),l("div",null,[r[52]||(r[52]=l("label",{class:"label-base"},"開立日期",-1)),oe(l("input",{"onUpdate:modelValue":r[12]||(r[12]=p=>w.issue_date=p),type:"date",class:G(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":R.value.issue_date}])},null,2),[[ve,w.issue_date]]),R.value.issue_date?(A(),q("p",Ws,N(R.value.issue_date),1)):I("",!0)]),l("div",null,[r[53]||(r[53]=l("label",{class:"label-base"},"工程名稱",-1)),oe(l("input",{"onUpdate:modelValue":r[13]||(r[13]=p=>w.project_name=p),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.project_name]])]),l("div",null,[r[54]||(r[54]=l("label",{class:"label-base"},"工程流向管制編號",-1)),oe(l("input",{"onUpdate:modelValue":r[14]||(r[14]=p=>w.flow_control_no=p),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.flow_control_no]])]),l("div",null,[r[56]||(r[56]=l("label",{class:"label-base"},"客戶",-1)),oe(l("select",{"onUpdate:modelValue":r[15]||(r[15]=p=>w.customer_id=p),class:G(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":R.value.customer_id}])},[r[55]||(r[55]=l("option",{value:0},"請選擇",-1)),(A(!0),q(he,null,Me(ie.value,p=>(A(),q("option",{key:p.id,value:p.id},N(p.name),9,Fs))),128))],2),[[qt,w.customer_id,void 0,{number:!0}]]),R.value.customer_id?(A(),q("p",Us,N(R.value.customer_id),1)):I("",!0)]),l("div",null,[r[57]||(r[57]=l("label",{class:"label-base"},"土方清運業者（可多選）",-1)),Dt(Ra(Ut),{modelValue:w.cleaner_ids,"onUpdate:modelValue":r[16]||(r[16]=p=>w.cleaner_ids=p),options:Z.value,mode:"tags","close-on-select":!1,searchable:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"請選擇清運業者",label:"name",valueProp:"id",trackBy:"id",maxHeight:200,class:G({"border-red-500":R.value.cleaner_ids})},null,8,["modelValue","options","class"]),R.value.cleaner_ids?(A(),q("p",Hs,N(R.value.cleaner_ids),1)):I("",!0),l("p",zs,"已選擇 "+N(((H=w.cleaner_ids)==null?void 0:H.length)||0)+" 個清運業者",1)]),l("div",null,[r[58]||(r[58]=l("label",{class:"label-base"},"有效期限（起）",-1)),oe(l("input",{"onUpdate:modelValue":r[17]||(r[17]=p=>w.valid_date_from=p),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.valid_date_from]])]),l("div",null,[r[59]||(r[59]=l("label",{class:"label-base"},"有效期限（迄）",-1)),oe(l("input",{"onUpdate:modelValue":r[18]||(r[18]=p=>w.valid_date_to=p),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.valid_date_to]])]),l("div",null,[r[60]||(r[60]=l("label",{class:"label-base"},"載運數量",-1)),oe(l("input",{"onUpdate:modelValue":r[19]||(r[19]=p=>w.carry_qty=p),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.carry_qty,void 0,{number:!0}]])]),l("div",null,[r[61]||(r[61]=l("label",{class:"label-base"},"載運土質",-1)),oe(l("input",{"onUpdate:modelValue":r[20]||(r[20]=p=>w.carry_soil_type=p),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.carry_soil_type]])]),l("div",Gs,[r[62]||(r[62]=l("label",{class:"label-base"},"狀態說明",-1)),oe(l("input",{"onUpdate:modelValue":r[21]||(r[21]=p=>w.status_desc=p),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.status_desc]])]),l("div",Ks,[r[63]||(r[63]=l("label",{class:"label-base"},"備註說明",-1)),oe(l("textarea",{"onUpdate:modelValue":r[22]||(r[22]=p=>w.remark_desc=p),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,w.remark_desc]])])])]),l("div",Xs,[l("button",{type:"button",onClick:le,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),l("button",{type:"submit",disabled:x.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(A(),q("i",Js)):I("",!0),me(" "+N(S.value?"更新":"建立"),1)],8,Ys)])],32)])])])):I("",!0),O.value?(A(),q("div",Qs,[l("div",Zs,[l("div",en,[r[67]||(r[67]=l("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[l("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),r[68]||(r[68]=l("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"確認刪除",-1)),l("div",tn,[l("p",an,[r[64]||(r[64]=me("您確定要刪除土單「",-1)),l("strong",null,N((pe=L.value)==null?void 0:pe.batch_no),1),r[65]||(r[65]=me("」嗎？此操作無法復原。",-1))])]),l("div",ln,[l("button",{onClick:de,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),l("button",{onClick:ge,disabled:T.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(A(),q("i",sn)):I("",!0),r[66]||(r[66]=me(" 刪除 ",-1))],8,rn)])])])])):I("",!0),P.value?(A(),q("div",nn,[l("div",on,[l("div",{class:"flex items-center justify-between mb-3"},[r[70]||(r[70]=l("h3",{class:"text-lg font-medium text-gray-900"},"調整開立張數",-1)),l("button",{onClick:De,class:"text-gray-400 hover:text-gray-600"},[...r[69]||(r[69]=[l("i",{class:"fas fa-times"},null,-1)])])]),l("div",un,[l("div",null,[r[73]||(r[73]=l("label",{class:"label-base"},"操作",-1)),l("div",dn,[l("label",cn,[oe(l("input",{type:"radio",value:"add","onUpdate:modelValue":r[23]||(r[23]=p=>C.value=p)},null,512),[[Zt,C.value]]),r[71]||(r[71]=l("span",null,"增加",-1))]),l("label",fn,[oe(l("input",{type:"radio",value:"remove","onUpdate:modelValue":r[24]||(r[24]=p=>C.value=p)},null,512),[[Zt,C.value]]),r[72]||(r[72]=l("span",null,"減少（僅刪未核銷）",-1))])])]),l("div",vn,[W.value?(A(),q("div",pn,[...r[74]||(r[74]=[l("i",{class:"fas fa-spinner fa-spin"},null,-1),me(" 讀取統計中... ",-1)])])):(A(),q(he,{key:1},[l("div",null,[r[75]||(r[75]=me("總張數：",-1)),l("span",bn,N(((re=B.value)==null?void 0:re.total)??0),1)]),l("div",null,[r[76]||(r[76]=me("已印數量：",-1)),l("span",mn,N(((fe=B.value)==null?void 0:fe.verified)??0),1)]),l("div",null,[r[77]||(r[77]=me("未印張數：",-1)),l("span",gn,N(((_e=B.value)==null?void 0:_e.pending)??0),1)])],64))]),l("div",null,[r[78]||(r[78]=l("label",{class:"label-base"},"數量",-1)),oe(l("input",{type:"number",min:"1",max:C.value==="remove"?((Pe=B.value)==null?void 0:Pe.pending)||0:null,"onUpdate:modelValue":r[25]||(r[25]=p=>c.value=p),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,8,hn),[[ve,c.value,void 0,{number:!0}]]),C.value==="remove"&&Number(c.value)>(((ft=B.value)==null?void 0:ft.pending)||0)?(A(),q("p",yn," 減少數量不可超過未印張數（"+N(((Je=B.value)==null?void 0:Je.pending)||0)+"） ",1)):I("",!0)]),C.value==="add"?(A(),q("div",wn,[r[79]||(r[79]=l("label",{class:"label-base"},"使用起始日期",-1)),oe(l("input",{type:"date","onUpdate:modelValue":r[26]||(r[26]=p=>k.value=p),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[ve,k.value]])])):I("",!0),C.value==="add"?(A(),q("div",xn,[r[80]||(r[80]=l("label",{class:"label-base"},"使用結束日期",-1)),oe(l("input",{type:"date","onUpdate:modelValue":r[27]||(r[27]=p=>E.value=p),min:k.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,8,On),[[ve,E.value]])])):I("",!0)]),l("div",kn,[l("button",{onClick:De,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"取消"),l("button",{onClick:Le,disabled:y.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(A(),q("i",Sn)):I("",!0),r[81]||(r[81]=me(" 確認 ",-1))],8,_n)])])])):I("",!0)]),Dt($a,{modelValue:F.value,"onUpdate:modelValue":r[28]||(r[28]=p=>F.value=p),totals:K.value,loading:Q.value,count:D.value,"onUpdate:count":r[29]||(r[29]=p=>D.value=p),onSubmit:Ce},null,8,["modelValue","totals","loading","count"])],64)}}};export{En as default};
