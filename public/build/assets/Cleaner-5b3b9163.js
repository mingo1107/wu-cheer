import{a as w,_ as we,r as u,y as Q,o as ke,c as a,d as e,k as Ce,w as Ve,f as c,p as g,v as C,s as U,F as B,g as R,t as r,e as I,j as p,q as le,i as k,l as De,h as l}from"./app-9d7b164d.js";import{u as $e}from"./usePagination-45663a91.js";class je{async getCleaner(d){return w.get(`/cleaners/${d}`)}async getCleaners(d={}){return w.get("/cleaners",d)}async createCleaner(d){return w.post("/cleaners",d)}async updateCleaner(d,b){return w.put(`/cleaners/${d}`,b)}async deleteCleaner(d){return w.delete(`/cleaners/${d}`)}async getVehicles(d){return w.get(`/cleaners/${d}/vehicles`)}async createVehicle(d,b){return w.post(`/cleaners/${d}/vehicles`,b)}async updateVehicle(d,b,m){return w.put(`/cleaners/${d}/vehicles/${b}`,m)}async deleteVehicle(d,b){return w.delete(`/cleaners/${d}/vehicles/${b}`)}}const V=new je;const Ee={class:"container mx-auto px-4 py-8"},Ue={class:"max-w-7xl mx-auto"},ze={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20"},Me={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8"},Te={class:"flex","aria-label":"Breadcrumb"},Ae={class:"inline-flex items-center space-x-1 md:space-x-3"},Pe={class:"inline-flex items-center"},Se={class:"mb-6"},qe={class:"flex flex-col sm:flex-row gap-4"},Fe={class:"flex-1"},Be={class:"relative"},Ie={class:"flex gap-2"},Ne={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Le={class:"overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200"},Ge={class:"bg-white divide-y divide-gray-200"},He={key:0,class:"animate-pulse"},Je={key:1},Ke={class:"td-base font-medium"},Oe={class:"td-base"},Qe={class:"td-base"},Re={class:"td-base"},Xe={class:"td-base"},Ye={class:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},Ze={class:"td-base"},et={class:"td-base text-gray-500"},tt={class:"td-base font-medium"},st={class:"action-buttons"},ot=["onClick"],at=["onClick"],lt=["onClick"],rt={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},nt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},it={class:"text-sm text-gray-700"},dt={class:"font-medium"},ut={class:"font-medium"},ct={class:"font-medium"},ft={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},pt=["disabled"],mt=["onClick"],xt={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},gt=["disabled"],bt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},vt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white"},yt={class:"mt-3"},_t={class:"flex items-center justify-between mb-4"},ht={class:"text-lg font-medium text-gray-900"},wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kt={key:0,class:"text-red-500 text-xs mt-1"},Ct={key:0,class:"text-red-500 text-xs mt-1"},Vt={key:0,class:"text-red-500 text-xs mt-1"},Dt={key:0,class:"text-red-500 text-xs mt-1"},$t={class:"md:col-span-2"},jt={class:"flex justify-end space-x-3 pt-4"},Et=["disabled"],Ut={key:0,class:"fas fa-spinner fa-spin mr-2"},zt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Mt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Tt={class:"mt-3 text-center"},At={class:"mt-2 px-7 py-3"},Pt={class:"text-sm text-gray-500"},St={class:"flex justify-center space-x-3 pt-4"},qt=["disabled"],Ft={key:0,class:"fas fa-spinner fa-spin mr-2"},Bt={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},It={class:"relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",style:{"min-height":"300px"}},Nt={class:"mt-3"},Lt={class:"flex items-center justify-between mb-4"},Wt={class:"text-lg font-medium text-gray-900"},Gt={class:"mb-6"},Ht={class:"bg-white rounded-lg shadow overflow-hidden"},Jt={class:"min-w-full divide-y divide-gray-200"},Kt={class:"bg-white divide-y divide-gray-200"},Ot={key:0,class:"animate-pulse"},Qt={key:1},Rt={class:"px-4 py-3 text-sm font-medium text-gray-900"},Xt={class:"px-4 py-3 text-sm text-gray-900"},Yt={class:"px-4 py-3 text-sm"},Zt={class:"px-4 py-3 text-sm text-gray-500"},es={class:"px-4 py-3 text-sm font-medium"},ts={class:"flex space-x-4"},ss=["onClick"],os=["onClick"],as={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ls={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white"},rs={class:"mt-3"},ns={class:"flex items-center justify-between mb-4"},is={class:"text-lg font-medium text-gray-900"},ds={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},us={key:0,class:"text-red-500 text-xs mt-1"},cs={key:0,class:"text-red-500 text-xs mt-1"},fs={class:"md:col-span-2"},ps={class:"md:col-span-2"},ms={class:"flex justify-end space-x-3 pt-4"},xs=["disabled"],gs={key:0,class:"fas fa-spinner fa-spin mr-2"},bs={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},vs={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},ys={class:"mt-3 text-center"},_s={class:"mt-2 px-7 py-3"},hs={class:"text-sm text-gray-500"},ws={class:"flex justify-center space-x-3 pt-4"},ks=["disabled"],Cs={key:0,class:"fas fa-spinner fa-spin mr-2"},Vs={__name:"Cleaner",setup(re){const d=u([]),b=u(!1),m=u(null),h=Q({search:"",status:"",sort_by:"created_at",sort_order:"desc",per_page:15}),z=u(!1),D=u(!1),M=u(!1),f=u({}),N=u(!1),T=u(!1),A=u(null),n=Q({id:null,cleaner_name:"",tax_id:"",contact_person:"",phone:"",status:"active"}),L=u(!1),P=u(!1),W=u(!1),v=u(null),S=u([]),G=u(!1),$=u(!1),q=u(!1),F=u(!1),j=u(null),y=u({}),i=Q({id:null,cleaner_id:null,front_plate:"",rear_plate:"",status:"active",notes:""}),{visiblePages:ne,goToPage:H}=$e(m,_);let X=null;const ie=()=>{clearTimeout(X),X=setTimeout(()=>_(),500)},_=async(s=1)=>{var t;try{b.value=!0;const x=await V.getCleaners({...h,page:s});if(x.status)d.value=Array.isArray((t=x.data)==null?void 0:t.data)?x.data.data:[],m.value={current_page:x.data.current_page,last_page:x.data.last_page,per_page:x.data.per_page,total:x.data.total,from:x.data.from,to:x.data.to};else throw new Error(x.message||"載入失敗")}catch(x){console.error("載入錯誤:",x),alert(x.message||"載入失敗")}finally{b.value=!1}},de=()=>{D.value=!1,Y(),z.value=!0},ue=s=>{D.value=!0,n.id=s.id,n.cleaner_name=s.cleaner_name,n.tax_id=s.tax_id||"",n.contact_person=s.contact_person,n.phone=s.phone,n.status=s.status,f.value={},z.value=!0},J=()=>{z.value=!1,Y(),f.value={}},Y=()=>{n.id=null,n.cleaner_name="",n.tax_id="",n.contact_person="",n.phone="",n.status="active"},ce=async()=>{try{M.value=!0,f.value={};let s;if(D.value?s=await V.updateCleaner(n.id,n):s=await V.createCleaner(n),s.status)J(),_();else if(s.errors)f.value=s.errors;else throw new Error(s.message||"操作失敗")}catch(s){console.error("提交錯誤:",s),alert(s.message||"操作失敗")}finally{M.value=!1}},fe=s=>{A.value=s,N.value=!0},Z=()=>{N.value=!1,A.value=null},pe=async()=>{try{T.value=!0;const s=await V.deleteCleaner(A.value.id);if(s.status)Z(),_();else throw new Error(s.message||"刪除失敗")}catch(s){console.error("刪除錯誤:",s),alert(s.message||"刪除失敗")}finally{T.value=!1}},me=s=>s?new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",xe=async s=>{v.value=s,L.value=!0,await K(s.id)},ge=()=>{L.value=!1,v.value=null,S.value=[]},K=async s=>{try{G.value=!0;const t=await V.getVehicles(s);if(t.status)S.value=Array.isArray(t.data)?t.data:[];else throw new Error(t.message||"載入車輛失敗")}catch(t){console.error("載入車輛錯誤:",t),alert(t.message||"載入車輛失敗")}finally{G.value=!1}},be=()=>{$.value=!1,ee(),P.value=!0},ve=s=>{$.value=!0,i.id=s.id,i.cleaner_id=s.cleaner_id,i.front_plate=s.front_plate,i.rear_plate=s.rear_plate||"",i.status=s.status,i.notes=s.notes||"",y.value={},P.value=!0},O=()=>{P.value=!1,ee(),y.value={}},ee=()=>{var s;i.id=null,i.cleaner_id=((s=v.value)==null?void 0:s.id)||null,i.front_plate="",i.rear_plate="",i.status="active",i.notes=""},ye=async()=>{try{if(q.value=!0,y.value={},!v.value)throw new Error("清運業者資訊不存在");let s;if($.value?s=await V.updateVehicle(v.value.id,i.id,i):s=await V.createVehicle(v.value.id,i),s.status)O(),await K(v.value.id),_();else if(s.errors)y.value=s.errors;else throw new Error(s.message||"操作失敗")}catch(s){console.error("提交車輛錯誤:",s),alert(s.message||"操作失敗")}finally{q.value=!1}},_e=s=>{j.value=s,W.value=!0},te=()=>{W.value=!1,j.value=null},he=async()=>{try{if(F.value=!0,!v.value||!j.value)throw new Error("資料不存在");const s=await V.deleteVehicle(v.value.id,j.value.id);if(s.status)te(),await K(v.value.id),_();else throw new Error(s.message||"刪除失敗")}catch(s){console.error("刪除車輛錯誤:",s),alert(s.message||"刪除失敗")}finally{F.value=!1}};return ke(()=>{_()}),(s,t)=>{var se,oe,ae;const x=De("router-link");return l(),a("div",Ee,[e("div",Ue,[e("div",ze,[e("div",Me,[e("div",null,[t[17]||(t[17]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"清運業者管理",-1)),e("nav",Te,[e("ol",Ae,[e("li",Pe,[Ce(x,{to:"/dashboard",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-amber-600 transition-colors duration-200"},{default:Ve(()=>[...t[15]||(t[15]=[e("i",{class:"fas fa-home mr-2"},null,-1),c(" Dashboard ",-1)])]),_:1})]),t[16]||(t[16]=e("li",null,[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-chevron-right text-gray-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-500"},"清運業者管理")])],-1))])])]),e("div",{class:"flex gap-3 mt-4 sm:mt-0"},[e("button",{onClick:de,class:"bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[...t[18]||(t[18]=[e("i",{class:"fas fa-plus mr-2"},null,-1),c("新增清運業者 ",-1)])])])]),e("div",Se,[e("div",qe,[e("div",Fe,[e("div",Be,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>h.search=o),onInput:ie,type:"text",placeholder:"搜尋（名稱、聯絡人、電話、統一編號）",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},null,544),[[C,h.search]]),t[19]||(t[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1))])]),e("div",Ie,[g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>h.status=o),onChange:_,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...t[20]||(t[20]=[e("option",{value:""},"全部狀態",-1),e("option",{value:"active"},"活躍",-1),e("option",{value:"inactive"},"停用",-1)])],544),[[U,h.status]]),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>h.sort_by=o),onChange:_,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...t[21]||(t[21]=[e("option",{value:"created_at"},"建立時間",-1),e("option",{value:"cleaner_name"},"名稱",-1),e("option",{value:"contact_person"},"聯絡人",-1),e("option",{value:"updated_at"},"更新時間",-1)])],544),[[U,h.sort_by]]),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>h.sort_order=o),onChange:_,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...t[22]||(t[22]=[e("option",{value:"desc"},"降序",-1),e("option",{value:"asc"},"升序",-1)])],544),[[U,h.sort_order]])])])]),e("div",Ne,[e("div",Le,[e("table",We,[t[29]||(t[29]=e("thead",{class:"bg-gradient-to-r from-amber-50 to-orange-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"名稱"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"聯絡人"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"電話"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"統一編號"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"車輛數量"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"狀態"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"建立時間"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"操作")])],-1)),e("tbody",Ge,[b.value?(l(),a("tr",He,[...t[23]||(t[23]=[e("td",{colspan:"8",class:"px-6 py-12 text-center text-gray-500"},[e("i",{class:"fas fa-spinner fa-spin text-2xl mb-2"}),e("div",null,"載入中...")],-1)])])):d.value.length===0?(l(),a("tr",Je,[...t[24]||(t[24]=[e("td",{colspan:"8",class:"px-6 py-12 text-center text-gray-500"},[e("i",{class:"fas fa-truck text-4xl mb-4 text-gray-300"}),e("div",{class:"text-lg font-medium"},"沒有資料"),e("div",{class:"text-sm"},"請嘗試調整搜尋條件或新增資料")],-1)])])):(l(!0),a(B,{key:2},R(d.value,o=>(l(),a("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Ke,r(o.cleaner_name),1),e("td",Oe,r(o.contact_person),1),e("td",Qe,r(o.phone),1),e("td",Re,r(o.tax_id||"-"),1),e("td",Xe,[e("span",Ye,[t[25]||(t[25]=e("i",{class:"fas fa-car mr-1"},null,-1)),c(" "+r(o.vehicles_count||0)+" 台 ",1)])]),e("td",Ze,[e("span",{class:k([o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(o.status==="active"?"活躍":"停用"),3)]),e("td",et,r(me(o.created_at)),1),e("td",tt,[e("div",st,[e("button",{onClick:E=>xe(o),class:"action-btn action-btn--vehicle",title:"管理車輛"},[...t[26]||(t[26]=[e("i",{class:"fas fa-car action-icon"},null,-1)])],8,ot),e("button",{onClick:E=>ue(o),class:"action-btn action-btn--edit",title:"編輯"},[...t[27]||(t[27]=[e("i",{class:"fas fa-edit action-icon"},null,-1)])],8,at),e("button",{onClick:E=>fe(o),class:"action-btn action-btn--delete",title:"刪除"},[...t[28]||(t[28]=[e("i",{class:"fas fa-trash action-icon"},null,-1)])],8,lt)])])]))),128))])])]),m.value&&m.value.last_page>1?(l(),a("div",rt,[e("div",nt,[e("div",null,[e("p",it,[t[30]||(t[30]=c(" 顯示第 ",-1)),e("span",dt,r(m.value.from||0),1),t[31]||(t[31]=c(" 到 ",-1)),e("span",ut,r(m.value.to||0),1),t[32]||(t[32]=c(" 筆，共 ",-1)),e("span",ct,r(m.value.total),1),t[33]||(t[33]=c(" 筆 ",-1))])]),e("div",null,[e("nav",ft,[e("button",{onClick:t[4]||(t[4]=o=>I(H)(m.value.current_page-1)),disabled:m.value.current_page<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[34]||(t[34]=[e("i",{class:"fas fa-chevron-left"},null,-1)])],8,pt),(l(!0),a(B,null,R(I(ne),o=>(l(),a(B,{key:o},[o!=="..."?(l(),a("button",{key:0,onClick:E=>I(H)(o),class:k([o===m.value.current_page?"z-10 bg-amber-50 border-amber-500 text-amber-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},r(o),11,mt)):(l(),a("span",xt,"..."))],64))),128)),e("button",{onClick:t[5]||(t[5]=o=>I(H)(m.value.current_page+1)),disabled:m.value.current_page>=m.value.last_page,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[35]||(t[35]=[e("i",{class:"fas fa-chevron-right"},null,-1)])],8,gt)])])])])):p("",!0)])])]),z.value?(l(),a("div",bt,[e("div",vt,[e("div",yt,[e("div",_t,[e("h3",ht,r(D.value?"編輯清運業者":"新增清運業者"),1),e("button",{onClick:J,class:"text-gray-400 hover:text-gray-600"},[...t[36]||(t[36]=[e("i",{class:"fas fa-times text-xl"},null,-1)])])]),e("form",{onSubmit:le(ce,["prevent"]),class:"space-y-4"},[e("div",wt,[e("div",null,[t[37]||(t[37]=e("label",{class:"label-base"},"名稱 *",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>n.cleaner_name=o),required:"",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":f.value.cleaner_name}])},null,2),[[C,n.cleaner_name]]),f.value.cleaner_name?(l(),a("p",kt,r(f.value.cleaner_name),1)):p("",!0)]),e("div",null,[t[38]||(t[38]=e("label",{class:"label-base"},"聯絡人 *",-1)),g(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>n.contact_person=o),required:"",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":f.value.contact_person}])},null,2),[[C,n.contact_person]]),f.value.contact_person?(l(),a("p",Ct,r(f.value.contact_person),1)):p("",!0)]),e("div",null,[t[39]||(t[39]=e("label",{class:"label-base"},"聯絡電話 *",-1)),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>n.phone=o),required:"",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":f.value.phone}])},null,2),[[C,n.phone]]),f.value.phone?(l(),a("p",Vt,r(f.value.phone),1)):p("",!0)]),e("div",null,[t[40]||(t[40]=e("label",{class:"label-base"},"統一編號（非必填）",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>n.tax_id=o),maxlength:"8",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":f.value.tax_id}])},null,2),[[C,n.tax_id]]),f.value.tax_id?(l(),a("p",Dt,r(f.value.tax_id),1)):p("",!0)]),e("div",$t,[t[42]||(t[42]=e("label",{class:"label-base"},"狀態",-1)),g(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>n.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},[...t[41]||(t[41]=[e("option",{value:"active"},"活躍",-1),e("option",{value:"inactive"},"停用",-1)])],512),[[U,n.status]])])]),e("div",jt,[e("button",{type:"button",onClick:J,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{type:"submit",disabled:M.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed"},[M.value?(l(),a("i",Ut)):p("",!0),c(" "+r(D.value?"更新":"建立"),1)],8,Et)])],32)])])])):p("",!0),N.value?(l(),a("div",zt,[e("div",Mt,[e("div",Tt,[t[46]||(t[46]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[47]||(t[47]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"確認刪除",-1)),e("div",At,[e("p",Pt,[t[43]||(t[43]=c("您確定要刪除清運業者「",-1)),e("strong",null,r((se=A.value)==null?void 0:se.cleaner_name),1),t[44]||(t[44]=c("」嗎？此操作無法復原。",-1))])]),e("div",St,[e("button",{onClick:Z,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{onClick:pe,disabled:T.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(l(),a("i",Ft)):p("",!0),t[45]||(t[45]=c(" 刪除 ",-1))],8,qt)])])])])):p("",!0),L.value?(l(),a("div",Bt,[e("div",It,[e("div",Nt,[e("div",Lt,[e("h3",Wt,[t[48]||(t[48]=e("i",{class:"fas fa-car mr-2"},null,-1)),c(" 管理車輛 - "+r((oe=v.value)==null?void 0:oe.cleaner_name),1)])]),e("div",Gt,[e("div",Ht,[e("table",Jt,[t[53]||(t[53]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"車頭車號"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"車尾車號"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"狀態"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"備註"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"操作")])],-1)),e("tbody",Kt,[G.value?(l(),a("tr",Ot,[...t[49]||(t[49]=[e("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500"},[e("i",{class:"fas fa-spinner fa-spin text-xl mb-2"}),e("div",null,"載入中...")],-1)])])):S.value.length===0?(l(),a("tr",Qt,[...t[50]||(t[50]=[e("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500"},[e("i",{class:"fas fa-car text-3xl mb-2 text-gray-300"}),e("div",{class:"text-sm"},"尚無車輛資料")],-1)])])):(l(!0),a(B,{key:2},R(S.value,o=>(l(),a("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Rt,r(o.front_plate),1),e("td",Xt,r(o.rear_plate||"-"),1),e("td",Yt,[e("span",{class:k([o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(o.status==="active"?"活躍":"停用"),3)]),e("td",Zt,r(o.notes||"-"),1),e("td",es,[e("div",ts,[e("button",{onClick:E=>ve(o),class:"p-2 rounded text-amber-600 hover:text-amber-900 hover:bg-amber-50 transition-colors duration-200",title:"編輯"},[...t[51]||(t[51]=[e("i",{class:"fas fa-edit text-lg"},null,-1)])],8,ss),e("button",{onClick:E=>_e(o),class:"p-2 rounded text-red-600 hover:text-red-900 hover:bg-red-50 transition-colors duration-200",title:"刪除"},[...t[52]||(t[52]=[e("i",{class:"fas fa-trash text-lg"},null,-1)])],8,os)])])]))),128))])])])]),e("div",{class:"flex justify-end gap-3 mb-4"},[e("button",{onClick:be,class:"bg-gradient-to-r from-green-500 to-green-600 text-white py-2 px-4 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200"},[...t[54]||(t[54]=[e("i",{class:"fas fa-plus mr-2"},null,-1),c("新增車輛 ",-1)])]),e("button",{onClick:ge,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all duration-200"},[...t[55]||(t[55]=[e("i",{class:"fas fa-times mr-1"},null,-1),c(" 關閉 ",-1)])])])])])])):p("",!0),P.value?(l(),a("div",as,[e("div",ls,[e("div",rs,[e("div",ns,[e("h3",is,r($.value?"編輯車輛":"新增車輛"),1),e("button",{onClick:O,class:"text-gray-400 hover:text-gray-600"},[...t[56]||(t[56]=[e("i",{class:"fas fa-times text-xl"},null,-1)])])]),e("form",{onSubmit:le(ye,["prevent"]),class:"space-y-4"},[e("div",ds,[e("div",null,[t[57]||(t[57]=e("label",{class:"label-base"},"車頭車號 *",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>i.front_plate=o),required:"",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":y.value.front_plate}])},null,2),[[C,i.front_plate]]),y.value.front_plate?(l(),a("p",us,r(y.value.front_plate),1)):p("",!0)]),e("div",null,[t[58]||(t[58]=e("label",{class:"label-base"},"車尾車號",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>i.rear_plate=o),class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":y.value.rear_plate}])},null,2),[[C,i.rear_plate]]),y.value.rear_plate?(l(),a("p",cs,r(y.value.rear_plate),1)):p("",!0)]),e("div",fs,[t[60]||(t[60]=e("label",{class:"label-base"},"狀態",-1)),g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>i.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},[...t[59]||(t[59]=[e("option",{value:"active"},"活躍",-1),e("option",{value:"inactive"},"停用",-1)])],512),[[U,i.status]])]),e("div",ps,[t[61]||(t[61]=e("label",{class:"label-base"},"備註",-1)),g(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=o=>i.notes=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[C,i.notes]])])]),e("div",ms,[e("button",{type:"button",onClick:O,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{type:"submit",disabled:q.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed"},[q.value?(l(),a("i",gs)):p("",!0),c(" "+r($.value?"更新":"建立"),1)],8,xs)])],32)])])])):p("",!0),W.value?(l(),a("div",bs,[e("div",vs,[e("div",ys,[t[65]||(t[65]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[66]||(t[66]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"確認刪除",-1)),e("div",_s,[e("p",hs,[t[62]||(t[62]=c("您確定要刪除車輛「",-1)),e("strong",null,r((ae=j.value)==null?void 0:ae.front_plate),1),t[63]||(t[63]=c("」嗎？此操作無法復原。",-1))])]),e("div",ws,[e("button",{onClick:te,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{onClick:he,disabled:F.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[F.value?(l(),a("i",Cs)):p("",!0),t[64]||(t[64]=c(" 刪除 ",-1))],8,ks)])])])])):p("",!0)])}}},js=we(Vs,[["__scopeId","data-v-ccb0bdfb"]]);export{js as default};
