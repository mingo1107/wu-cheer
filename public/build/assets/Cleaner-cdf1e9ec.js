import{a as k,_ as he,r as c,y as Q,z as we,o as ke,c as l,d as e,k as Ce,w as Ve,f as m,m as b,v as V,q as z,F as I,g as R,t as n,j as x,p as ae,i as C,l as De,h as r}from"./app-a93a371e.js";class $e{async getCleaner(u){return k.get(`/cleaners/${u}`)}async getCleaners(u={}){return k.get("/cleaners",u)}async createCleaner(u){return k.post("/cleaners",u)}async updateCleaner(u,v){return k.put(`/cleaners/${u}`,v)}async deleteCleaner(u){return k.delete(`/cleaners/${u}`)}async getVehicles(u){return k.get(`/cleaners/${u}/vehicles`)}async createVehicle(u,v){return k.post(`/cleaners/${u}/vehicles`,v)}async updateVehicle(u,v,f){return k.put(`/cleaners/${u}/vehicles/${v}`,f)}async deleteVehicle(u,v){return k.delete(`/cleaners/${u}/vehicles/${v}`)}}const D=new $e;const je={class:"container mx-auto px-4 py-8"},Ee={class:"max-w-7xl mx-auto"},Ue={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20"},ze={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8"},Me={class:"flex","aria-label":"Breadcrumb"},Te={class:"inline-flex items-center space-x-1 md:space-x-3"},Ae={class:"inline-flex items-center"},Se={class:"mb-6"},qe={class:"flex flex-col sm:flex-row gap-4"},Fe={class:"flex-1"},Pe={class:"relative"},Be={class:"flex gap-2"},Ie={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Ne={class:"overflow-x-auto"},Le={class:"min-w-full divide-y divide-gray-200"},We={class:"bg-white divide-y divide-gray-200"},Ge={key:0,class:"animate-pulse"},He={key:1},Je={class:"td-base font-medium"},Ke={class:"td-base"},Oe={class:"td-base"},Qe={class:"td-base"},Re={class:"td-base"},Xe={class:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},Ye={class:"td-base"},Ze={class:"td-base text-gray-500"},et={class:"td-base font-medium"},tt={class:"action-buttons"},st=["onClick"],ot=["onClick"],at=["onClick"],lt={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},rt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},nt={class:"text-sm text-gray-700"},it={class:"font-medium"},dt={class:"font-medium"},ut={class:"font-medium"},ct={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ft=["disabled"],pt=["onClick"],mt={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},gt=["disabled"],xt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},bt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white"},vt={class:"mt-3"},yt={class:"flex items-center justify-between mb-4"},_t={class:"text-lg font-medium text-gray-900"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wt={key:0,class:"text-red-500 text-xs mt-1"},kt={key:0,class:"text-red-500 text-xs mt-1"},Ct={key:0,class:"text-red-500 text-xs mt-1"},Vt={key:0,class:"text-red-500 text-xs mt-1"},Dt={class:"md:col-span-2"},$t={class:"flex justify-end space-x-3 pt-4"},jt=["disabled"],Et={key:0,class:"fas fa-spinner fa-spin mr-2"},Ut={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},zt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Mt={class:"mt-3 text-center"},Tt={class:"mt-2 px-7 py-3"},At={class:"text-sm text-gray-500"},St={class:"flex justify-center space-x-3 pt-4"},qt=["disabled"],Ft={key:0,class:"fas fa-spinner fa-spin mr-2"},Pt={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Bt={class:"relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",style:{"min-height":"300px"}},It={class:"mt-3"},Nt={class:"flex items-center justify-between mb-4"},Lt={class:"text-lg font-medium text-gray-900"},Wt={class:"mb-6"},Gt={class:"bg-white rounded-lg shadow overflow-hidden"},Ht={class:"min-w-full divide-y divide-gray-200"},Jt={class:"bg-white divide-y divide-gray-200"},Kt={key:0,class:"animate-pulse"},Ot={key:1},Qt={class:"px-4 py-3 text-sm font-medium text-gray-900"},Rt={class:"px-4 py-3 text-sm text-gray-900"},Xt={class:"px-4 py-3 text-sm"},Yt={class:"px-4 py-3 text-sm text-gray-500"},Zt={class:"px-4 py-3 text-sm font-medium"},es={class:"flex space-x-4"},ts=["onClick"],ss=["onClick"],os={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},as={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white"},ls={class:"mt-3"},rs={class:"flex items-center justify-between mb-4"},ns={class:"text-lg font-medium text-gray-900"},is={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ds={key:0,class:"text-red-500 text-xs mt-1"},us={key:0,class:"text-red-500 text-xs mt-1"},cs={class:"md:col-span-2"},fs={class:"md:col-span-2"},ps={class:"flex justify-end space-x-3 pt-4"},ms=["disabled"],gs={key:0,class:"fas fa-spinner fa-spin mr-2"},xs={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},bs={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},vs={class:"mt-3 text-center"},ys={class:"mt-2 px-7 py-3"},_s={class:"text-sm text-gray-500"},hs={class:"flex justify-center space-x-3 pt-4"},ws=["disabled"],ks={key:0,class:"fas fa-spinner fa-spin mr-2"},Cs={__name:"Cleaner",setup(le){const u=c([]),v=c(!1),f=c(null),w=Q({search:"",status:"",sort_by:"created_at",sort_order:"desc",per_page:15}),M=c(!1),$=c(!1),T=c(!1),g=c({}),N=c(!1),A=c(!1),S=c(null),i=Q({id:null,cleaner_name:"",tax_id:"",contact_person:"",phone:"",status:"active"}),L=c(!1),q=c(!1),W=c(!1),y=c(null),F=c([]),G=c(!1),j=c(!1),P=c(!1),B=c(!1),E=c(null),_=c({}),d=Q({id:null,cleaner_id:null,front_plate:"",rear_plate:"",status:"active",notes:""});let X=null;const re=()=>{clearTimeout(X),X=setTimeout(()=>h(),500)},ne=we(()=>{if(!f.value)return[];const s=f.value.current_page,t=f.value.last_page,a=[];if(t<=7)for(let p=1;p<=t;p++)a.push(p);else if(s<=4){for(let p=1;p<=5;p++)a.push(p);a.push("..."),a.push(t)}else if(s>=t-3){a.push(1),a.push("...");for(let p=t-4;p<=t;p++)a.push(p)}else{a.push(1),a.push("...");for(let p=s-1;p<=s+1;p++)a.push(p);a.push("..."),a.push(t)}return a}),h=async(s=1)=>{var t;try{v.value=!0;const a=await D.getCleaners({...w,page:s});if(a.status)u.value=Array.isArray((t=a.data)==null?void 0:t.data)?a.data.data:[],f.value={current_page:a.data.current_page,last_page:a.data.last_page,per_page:a.data.per_page,total:a.data.total,from:a.data.from,to:a.data.to};else throw new Error(a.message||"載入失敗")}catch(a){console.error("載入錯誤:",a),alert(a.message||"載入失敗")}finally{v.value=!1}},H=s=>{s>=1&&s<=f.value.last_page&&h(s)},ie=()=>{$.value=!1,Y(),M.value=!0},de=s=>{$.value=!0,i.id=s.id,i.cleaner_name=s.cleaner_name,i.tax_id=s.tax_id||"",i.contact_person=s.contact_person,i.phone=s.phone,i.status=s.status,g.value={},M.value=!0},J=()=>{M.value=!1,Y(),g.value={}},Y=()=>{i.id=null,i.cleaner_name="",i.tax_id="",i.contact_person="",i.phone="",i.status="active"},ue=async()=>{try{T.value=!0,g.value={};let s;if($.value?s=await D.updateCleaner(i.id,i):s=await D.createCleaner(i),s.status)J(),h();else if(s.errors)g.value=s.errors;else throw new Error(s.message||"操作失敗")}catch(s){console.error("提交錯誤:",s),alert(s.message||"操作失敗")}finally{T.value=!1}},ce=s=>{S.value=s,N.value=!0},Z=()=>{N.value=!1,S.value=null},fe=async()=>{try{A.value=!0;const s=await D.deleteCleaner(S.value.id);if(s.status)Z(),h();else throw new Error(s.message||"刪除失敗")}catch(s){console.error("刪除錯誤:",s),alert(s.message||"刪除失敗")}finally{A.value=!1}},pe=s=>s?new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",me=async s=>{y.value=s,L.value=!0,await K(s.id)},ge=()=>{L.value=!1,y.value=null,F.value=[]},K=async s=>{try{G.value=!0;const t=await D.getVehicles(s);if(t.status)F.value=Array.isArray(t.data)?t.data:[];else throw new Error(t.message||"載入車輛失敗")}catch(t){console.error("載入車輛錯誤:",t),alert(t.message||"載入車輛失敗")}finally{G.value=!1}},xe=()=>{j.value=!1,ee(),q.value=!0},be=s=>{j.value=!0,d.id=s.id,d.cleaner_id=s.cleaner_id,d.front_plate=s.front_plate,d.rear_plate=s.rear_plate||"",d.status=s.status,d.notes=s.notes||"",_.value={},q.value=!0},O=()=>{q.value=!1,ee(),_.value={}},ee=()=>{var s;d.id=null,d.cleaner_id=((s=y.value)==null?void 0:s.id)||null,d.front_plate="",d.rear_plate="",d.status="active",d.notes=""},ve=async()=>{try{if(P.value=!0,_.value={},!y.value)throw new Error("清運業者資訊不存在");let s;if(j.value?s=await D.updateVehicle(y.value.id,d.id,d):s=await D.createVehicle(y.value.id,d),s.status)O(),await K(y.value.id),h();else if(s.errors)_.value=s.errors;else throw new Error(s.message||"操作失敗")}catch(s){console.error("提交車輛錯誤:",s),alert(s.message||"操作失敗")}finally{P.value=!1}},ye=s=>{E.value=s,W.value=!0},te=()=>{W.value=!1,E.value=null},_e=async()=>{try{if(B.value=!0,!y.value||!E.value)throw new Error("資料不存在");const s=await D.deleteVehicle(y.value.id,E.value.id);if(s.status)te(),await K(y.value.id),h();else throw new Error(s.message||"刪除失敗")}catch(s){console.error("刪除車輛錯誤:",s),alert(s.message||"刪除失敗")}finally{B.value=!1}};return ke(()=>{h()}),(s,t)=>{var p,se,oe;const a=De("router-link");return r(),l("div",je,[e("div",Ee,[e("div",Ue,[e("div",ze,[e("div",null,[t[17]||(t[17]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"清運業者管理",-1)),e("nav",Me,[e("ol",Te,[e("li",Ae,[Ce(a,{to:"/dashboard",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-amber-600 transition-colors duration-200"},{default:Ve(()=>[...t[15]||(t[15]=[e("i",{class:"fas fa-home mr-2"},null,-1),m(" Dashboard ",-1)])]),_:1})]),t[16]||(t[16]=e("li",null,[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-chevron-right text-gray-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-500"},"清運業者管理")])],-1))])])]),e("div",{class:"flex gap-3 mt-4 sm:mt-0"},[e("button",{onClick:ie,class:"bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},[...t[18]||(t[18]=[e("i",{class:"fas fa-plus mr-2"},null,-1),m("新增清運業者 ",-1)])])])]),e("div",Se,[e("div",qe,[e("div",Fe,[e("div",Pe,[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>w.search=o),onInput:re,type:"text",placeholder:"搜尋（名稱、聯絡人、電話、統一編號）",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},null,544),[[V,w.search]]),t[19]||(t[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1))])]),e("div",Be,[b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>w.status=o),onChange:h,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...t[20]||(t[20]=[e("option",{value:""},"全部狀態",-1),e("option",{value:"active"},"活躍",-1),e("option",{value:"inactive"},"停用",-1)])],544),[[z,w.status]]),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>w.sort_by=o),onChange:h,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...t[21]||(t[21]=[e("option",{value:"created_at"},"建立時間",-1),e("option",{value:"cleaner_name"},"名稱",-1),e("option",{value:"contact_person"},"聯絡人",-1),e("option",{value:"updated_at"},"更新時間",-1)])],544),[[z,w.sort_by]]),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>w.sort_order=o),onChange:h,class:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200"},[...t[22]||(t[22]=[e("option",{value:"desc"},"降序",-1),e("option",{value:"asc"},"升序",-1)])],544),[[z,w.sort_order]])])])]),e("div",Ie,[e("div",Ne,[e("table",Le,[t[29]||(t[29]=e("thead",{class:"bg-gradient-to-r from-amber-50 to-orange-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"名稱"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"聯絡人"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"電話"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"統一編號"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"車輛數量"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"狀態"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"建立時間"),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"操作")])],-1)),e("tbody",We,[v.value?(r(),l("tr",Ge,[...t[23]||(t[23]=[e("td",{colspan:"8",class:"px-6 py-12 text-center text-gray-500"},[e("i",{class:"fas fa-spinner fa-spin text-2xl mb-2"}),e("div",null,"載入中...")],-1)])])):u.value.length===0?(r(),l("tr",He,[...t[24]||(t[24]=[e("td",{colspan:"8",class:"px-6 py-12 text-center text-gray-500"},[e("i",{class:"fas fa-truck text-4xl mb-4 text-gray-300"}),e("div",{class:"text-lg font-medium"},"沒有資料"),e("div",{class:"text-sm"},"請嘗試調整搜尋條件或新增資料")],-1)])])):(r(!0),l(I,{key:2},R(u.value,o=>(r(),l("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Je,n(o.cleaner_name),1),e("td",Ke,n(o.contact_person),1),e("td",Oe,n(o.phone),1),e("td",Qe,n(o.tax_id||"-"),1),e("td",Re,[e("span",Xe,[t[25]||(t[25]=e("i",{class:"fas fa-car mr-1"},null,-1)),m(" "+n(o.vehicles_count||0)+" 台 ",1)])]),e("td",Ye,[e("span",{class:C([o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(o.status==="active"?"活躍":"停用"),3)]),e("td",Ze,n(pe(o.created_at)),1),e("td",et,[e("div",tt,[e("button",{onClick:U=>me(o),class:"action-btn action-btn--vehicle",title:"管理車輛"},[...t[26]||(t[26]=[e("i",{class:"fas fa-car action-icon"},null,-1)])],8,st),e("button",{onClick:U=>de(o),class:"action-btn action-btn--edit",title:"編輯"},[...t[27]||(t[27]=[e("i",{class:"fas fa-edit action-icon"},null,-1)])],8,ot),e("button",{onClick:U=>ce(o),class:"action-btn action-btn--delete",title:"刪除"},[...t[28]||(t[28]=[e("i",{class:"fas fa-trash action-icon"},null,-1)])],8,at)])])]))),128))])])]),f.value&&f.value.last_page>1?(r(),l("div",lt,[e("div",rt,[e("div",null,[e("p",nt,[t[30]||(t[30]=m(" 顯示第 ",-1)),e("span",it,n(f.value.from||0),1),t[31]||(t[31]=m(" 到 ",-1)),e("span",dt,n(f.value.to||0),1),t[32]||(t[32]=m(" 筆，共 ",-1)),e("span",ut,n(f.value.total),1),t[33]||(t[33]=m(" 筆 ",-1))])]),e("div",null,[e("nav",ct,[e("button",{onClick:t[4]||(t[4]=o=>H(f.value.current_page-1)),disabled:f.value.current_page<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[34]||(t[34]=[e("i",{class:"fas fa-chevron-left"},null,-1)])],8,ft),(r(!0),l(I,null,R(ne.value,o=>(r(),l(I,{key:o},[o!=="..."?(r(),l("button",{key:0,onClick:U=>H(o),class:C([o===f.value.current_page?"z-10 bg-amber-50 border-amber-500 text-amber-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},n(o),11,pt)):(r(),l("span",mt,"..."))],64))),128)),e("button",{onClick:t[5]||(t[5]=o=>H(f.value.current_page+1)),disabled:f.value.current_page>=f.value.last_page,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[35]||(t[35]=[e("i",{class:"fas fa-chevron-right"},null,-1)])],8,gt)])])])])):x("",!0)])])]),M.value?(r(),l("div",xt,[e("div",bt,[e("div",vt,[e("div",yt,[e("h3",_t,n($.value?"編輯清運業者":"新增清運業者"),1),e("button",{onClick:J,class:"text-gray-400 hover:text-gray-600"},[...t[36]||(t[36]=[e("i",{class:"fas fa-times text-xl"},null,-1)])])]),e("form",{onSubmit:ae(ue,["prevent"]),class:"space-y-4"},[e("div",ht,[e("div",null,[t[37]||(t[37]=e("label",{class:"label-base"},"名稱 *",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>i.cleaner_name=o),required:"",class:C(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":g.value.cleaner_name}])},null,2),[[V,i.cleaner_name]]),g.value.cleaner_name?(r(),l("p",wt,n(g.value.cleaner_name),1)):x("",!0)]),e("div",null,[t[38]||(t[38]=e("label",{class:"label-base"},"聯絡人 *",-1)),b(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>i.contact_person=o),required:"",class:C(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":g.value.contact_person}])},null,2),[[V,i.contact_person]]),g.value.contact_person?(r(),l("p",kt,n(g.value.contact_person),1)):x("",!0)]),e("div",null,[t[39]||(t[39]=e("label",{class:"label-base"},"聯絡電話 *",-1)),b(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>i.phone=o),required:"",class:C(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":g.value.phone}])},null,2),[[V,i.phone]]),g.value.phone?(r(),l("p",Ct,n(g.value.phone),1)):x("",!0)]),e("div",null,[t[40]||(t[40]=e("label",{class:"label-base"},"統一編號（非必填）",-1)),b(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>i.tax_id=o),maxlength:"8",class:C(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":g.value.tax_id}])},null,2),[[V,i.tax_id]]),g.value.tax_id?(r(),l("p",Vt,n(g.value.tax_id),1)):x("",!0)]),e("div",Dt,[t[42]||(t[42]=e("label",{class:"label-base"},"狀態",-1)),b(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>i.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},[...t[41]||(t[41]=[e("option",{value:"active"},"活躍",-1),e("option",{value:"inactive"},"停用",-1)])],512),[[z,i.status]])])]),e("div",$t,[e("button",{type:"button",onClick:J,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{type:"submit",disabled:T.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(r(),l("i",Et)):x("",!0),m(" "+n($.value?"更新":"建立"),1)],8,jt)])],32)])])])):x("",!0),N.value?(r(),l("div",Ut,[e("div",zt,[e("div",Mt,[t[46]||(t[46]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[47]||(t[47]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"確認刪除",-1)),e("div",Tt,[e("p",At,[t[43]||(t[43]=m("您確定要刪除清運業者「",-1)),e("strong",null,n((p=S.value)==null?void 0:p.cleaner_name),1),t[44]||(t[44]=m("」嗎？此操作無法復原。",-1))])]),e("div",St,[e("button",{onClick:Z,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{onClick:fe,disabled:A.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[A.value?(r(),l("i",Ft)):x("",!0),t[45]||(t[45]=m(" 刪除 ",-1))],8,qt)])])])])):x("",!0),L.value?(r(),l("div",Pt,[e("div",Bt,[e("div",It,[e("div",Nt,[e("h3",Lt,[t[48]||(t[48]=e("i",{class:"fas fa-car mr-2"},null,-1)),m(" 管理車輛 - "+n((se=y.value)==null?void 0:se.cleaner_name),1)])]),e("div",Wt,[e("div",Gt,[e("table",Ht,[t[53]||(t[53]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"車頭車號"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"車尾車號"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"狀態"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"備註"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"操作")])],-1)),e("tbody",Jt,[G.value?(r(),l("tr",Kt,[...t[49]||(t[49]=[e("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500"},[e("i",{class:"fas fa-spinner fa-spin text-xl mb-2"}),e("div",null,"載入中...")],-1)])])):F.value.length===0?(r(),l("tr",Ot,[...t[50]||(t[50]=[e("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500"},[e("i",{class:"fas fa-car text-3xl mb-2 text-gray-300"}),e("div",{class:"text-sm"},"尚無車輛資料")],-1)])])):(r(!0),l(I,{key:2},R(F.value,o=>(r(),l("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Qt,n(o.front_plate),1),e("td",Rt,n(o.rear_plate||"-"),1),e("td",Xt,[e("span",{class:C([o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(o.status==="active"?"活躍":"停用"),3)]),e("td",Yt,n(o.notes||"-"),1),e("td",Zt,[e("div",es,[e("button",{onClick:U=>be(o),class:"p-2 rounded text-amber-600 hover:text-amber-900 hover:bg-amber-50 transition-colors duration-200",title:"編輯"},[...t[51]||(t[51]=[e("i",{class:"fas fa-edit text-lg"},null,-1)])],8,ts),e("button",{onClick:U=>ye(o),class:"p-2 rounded text-red-600 hover:text-red-900 hover:bg-red-50 transition-colors duration-200",title:"刪除"},[...t[52]||(t[52]=[e("i",{class:"fas fa-trash text-lg"},null,-1)])],8,ss)])])]))),128))])])])]),e("div",{class:"flex justify-end gap-3 mb-4"},[e("button",{onClick:xe,class:"bg-gradient-to-r from-green-500 to-green-600 text-white py-2 px-4 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200"},[...t[54]||(t[54]=[e("i",{class:"fas fa-plus mr-2"},null,-1),m("新增車輛 ",-1)])]),e("button",{onClick:ge,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all duration-200"},[...t[55]||(t[55]=[e("i",{class:"fas fa-times mr-1"},null,-1),m(" 關閉 ",-1)])])])])])])):x("",!0),q.value?(r(),l("div",os,[e("div",as,[e("div",ls,[e("div",rs,[e("h3",ns,n(j.value?"編輯車輛":"新增車輛"),1),e("button",{onClick:O,class:"text-gray-400 hover:text-gray-600"},[...t[56]||(t[56]=[e("i",{class:"fas fa-times text-xl"},null,-1)])])]),e("form",{onSubmit:ae(ve,["prevent"]),class:"space-y-4"},[e("div",is,[e("div",null,[t[57]||(t[57]=e("label",{class:"label-base"},"車頭車號 *",-1)),b(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>d.front_plate=o),required:"",class:C(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":_.value.front_plate}])},null,2),[[V,d.front_plate]]),_.value.front_plate?(r(),l("p",ds,n(_.value.front_plate),1)):x("",!0)]),e("div",null,[t[58]||(t[58]=e("label",{class:"label-base"},"車尾車號",-1)),b(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>d.rear_plate=o),class:C(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",{"border-red-500":_.value.rear_plate}])},null,2),[[V,d.rear_plate]]),_.value.rear_plate?(r(),l("p",us,n(_.value.rear_plate),1)):x("",!0)]),e("div",cs,[t[60]||(t[60]=e("label",{class:"label-base"},"狀態",-1)),b(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>d.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},[...t[59]||(t[59]=[e("option",{value:"active"},"活躍",-1),e("option",{value:"inactive"},"停用",-1)])],512),[[z,d.status]])]),e("div",fs,[t[61]||(t[61]=e("label",{class:"label-base"},"備註",-1)),b(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=o=>d.notes=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[V,d.notes]])])]),e("div",ps,[e("button",{type:"button",onClick:O,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{type:"submit",disabled:P.value,class:"px-4 py-2 text-sm font-medium text-white bg-amber-600 border border-transparent rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed"},[P.value?(r(),l("i",gs)):x("",!0),m(" "+n(j.value?"更新":"建立"),1)],8,ms)])],32)])])])):x("",!0),W.value?(r(),l("div",xs,[e("div",bs,[e("div",vs,[t[65]||(t[65]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[66]||(t[66]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"確認刪除",-1)),e("div",ys,[e("p",_s,[t[62]||(t[62]=m("您確定要刪除車輛「",-1)),e("strong",null,n((oe=E.value)==null?void 0:oe.front_plate),1),t[63]||(t[63]=m("」嗎？此操作無法復原。",-1))])]),e("div",hs,[e("button",{onClick:te,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500"},"取消"),e("button",{onClick:_e,disabled:B.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[B.value?(r(),l("i",ks)):x("",!0),t[64]||(t[64]=m(" 刪除 ",-1))],8,ws)])])])])):x("",!0)])}}},Ds=he(Cs,[["__scopeId","data-v-3df3034b"]]);export{Ds as default};
